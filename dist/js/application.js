(function(){var d={name:"",passcode:"",levels:[]},b={WASGuide:263,LogViewer:10015,Historydownload:1801,DisableLogCapacityLimit:537,GSMHomeUpgrade:6,VxWorks:6,GSMSpecial:7,zipLogsPath:272,ONE_CARRIER:6,XML_TREE:10015,Help:7,LTE_EN:16,TD_HOME:1280},m={WASGuide:263,LogViewer:10015,Historydownload:1801,DisableLogCapacityLimit:537,GSMHomeUpgrade:6,VxWorks:6,GSMSpecial:7,zipLogsPath:272,ONE_CARRIER:6,XML_TREE:10015,Help:7,LTE_EN:16,TD_HOME:1280},n={UserAccont:8196,WLANParams:4,RestoreAdmin:4,DefaultLevel:8192,LogViewer:8192,XML_TREE:8196};Roles={Market:"marketUser",Family:"familyUser",Root:"root"};Branch={CProduct:null,Modules:{notInit:true}};USER={getAccounts:function(){f();return[]},hasModule:function(o){if(Branch.Modules.notInit){e()}if(typeof(o)==="undefined"){return false}if(Branch.CProduct&o){return true}return false},login:function(o,q,r){var p=function(t){if(-1!=t.indexOf("threeTimeError","0")){t=t.split("|")[1];t=t.split(".")[0];var u=window.parseInt(t/60,10),v=window.parseInt(t%60,10);setErrMSG("您已连续三次输入用户名或者密码有误，请在"+u+"分钟"+v+"秒以后重试）")}else{if(-1!=t.indexOf("userExsitError","0")){setErrMSG("该用户已登录，请确认该用户是否在另一终端未退出")}else{setErrMSG(top.T.AlertInfo.LoginErr)}}};var s="/req/authReq.asp";e(r);if(r===Roles.Family){if(!USER.hasModule(Branch.Modules.UserAccont)){p("noFamilyUser");return}}$.post(s,{reqType:1,username:o,password:q,role:r},function(t){if(-1!==t.indexOf("success","0")){if(r===Roles.Family){d.levels=[-1,3,4,10,13,14,16];if(USER.hasModule(Branch.Modules.DefaultLevel)){d.levels.push(0)}}else{if(r===Roles.Market){d.levels=[-2,0,1,3,11,13,15,16]}else{if(r===Roles.Root){d.levels=[-3,0,1,3,12,14,15,16]}else{d.levels=[]}}}SetCookie("role",r);SetCookie("username",o);SetCookie("levels",d.levels);document.cookie="loginFlag=1;";if(r==top.Roles.Market){window.top.location="dashBoard.asp?r="+Math.random()+"#index"}else{window.top.location="main.asp?r="+Math.random()+"#index"}}else{p(t)}})},configLeftTreeTab:function(){if(Branch.Modules.notInit){e()}$($("h3[name='baseInfoTree']")[0]).css("display","none");if(USER.hasModule(Branch.Modules.XML_TREE)){$($($("h3[name='baseInfoTree']")[0]).children()[0]).hide();$($($("h3[name='baseInfoTree']")[0]).children()[1]).hide()}},initTree:function(){setTimeout(l,10)},isAuthorised:function(r){try{var s="",p=0,q=d.levels.length;if(q===0){s=GetCookie("levels");d.levels=s.split(",");for(p=0,q=d.levels.length;p<q;p+=1){d.levels[p]=window.parseInt(d.levels[p],10)}}if(d.levels.length===0){return false}r=window.parseInt(r,10);for(p=0,q=d.levels.length;p<q;p+=1){if(d.levels[p]===r){return true}}return false}catch(o){System.logout(1)}},getStructLevel:function(r,q){if(typeof(r)==="undefined"){alert("StrLevels undefined.")}var o=r.split("|"),p;if(q==="p"){if(o.length<3){return 0}else{p=window.parseInt(o[2],10);return isNaN(p)?0:p}}else{if(q==="s"){if(o.length<4){return 0}else{p=window.parseInt(o[3],10);return isNaN(p)?0:p}}else{return 0}}}};function f(){if(Branch.CProduct===null){var o="",p="/req/generalReq.asp";$.ajaxSetup({async:false});$.post(p,{caseType:5},function(q){o=window.parseInt(q);if(isNaN(o)){Branch.CProduct=null}else{Branch.CProduct=o}});$.ajaxSetup({async:true})}}function e(o){f();if(typeof(o)==="undefined"){o=GetCookie("role")}if(o===Roles.Market){Branch.Modules=b}else{if(o===Roles.Root){Branch.Modules=m}else{if(o===Roles.Family){Branch.Modules=n}}}switch(Branch.CProduct){case 1:G_PRODUCT_TYPE="GSM_EN";break;case 2:G_PRODUCT_TYPE="GSM_HOME";break;case 4:G_PRODUCT_TYPE="GSM_SINGLE_MODE";break;case 8:G_PRODUCT_TYPE="GSM_AU";break;case 16:G_PRODUCT_TYPE="LTE_EN";break;case 256:G_PRODUCT_TYPE="TD_HOME";break;case 512:G_PRODUCT_TYPE="TD_AU";break;case 4096:G_PRODUCT_TYPE="WCDMA_EN";break;case 8192:G_PRODUCT_TYPE="ONE_FIVE_EIGHT_EIGHT_SERVER";break}}function l(){LMT.cmdSyn("get MetaData;",j)}var k=0;function j(r){var o=-1,q=[];if(r!="connect fail."){i();o=LMT.parser(r)}if(o===-1||o.name_val.length===0){if(k<20){k+=1;setTimeout(l,2000);ModalCommon.progress("Loading...")}else{ModalCommon.delProgress();g([])}return}ModalCommon.delProgress();k=0;var s=o.name_val[0].name,p=1,v="",u=0;q.push(s);for(p=1,u=o.name_val.length;p<u;p+=1){v=o.name_val[p].name;if(s!==v){if(v==="webTips"||v==="WebTips"){v="Level"}q.push(v)}else{break}}localDB.DeleteTable("c_param");localDB.CreateTable("c_param",q);var w=[],t=0;for(t=0,u=o.name_val.length;t<u;t+=1){w.push(o.name_val[t].val)}localDB.T_import("c_param",w);top.c_paramRowIndex={StructID:localDB.T_getIndexByName("c_param","StructID"),MemberID:localDB.T_getIndexByName("c_param","MemberID"),StructName:localDB.T_getIndexByName("c_param","StructName"),MemberName:localDB.T_getIndexByName("c_param","MemberName"),IsPrimaryKey:localDB.T_getIndexByName("c_param","IsPrimaryKey"),DefaultValue:localDB.T_getIndexByName("c_param","DefaultValue"),Regex:localDB.T_getIndexByName("c_param","Regex"),StructCnName:localDB.T_getIndexByName("c_param","StructCnName"),MemberCnName:localDB.T_getIndexByName("c_param","MemberCnName"),ClassifyName:0,WebType:localDB.T_getIndexByName("c_param","WebType"),TypeDesc:localDB.T_getIndexByName("c_param","TypeDesc"),ValueType:localDB.T_getIndexByName("c_param","ValueType"),Level:localDB.T_getIndexByName("c_param","Level"),SetStatus:localDB.T_getIndexByName("c_param","SetStatus")};if(Language==="EN"){localDB.emptyCol("c_param","MemberCnName")}localTree=LocalTree.init();g(localTree)}function i(){LMT.cmdSyn("get AlarmDictionary;",h)}function h(r){var o=LMT.parser(r),q=[];if(o.result==="000"){if(o.name_val.length===0){q=["ID","AlarmIdentifier","Name","CnName","Source","PerceivedSeverity","ProbableCause","Condition","Specification"];localDB.DeleteTable("alarm_dictionary");localDB.CreateTable("alarm_dictionary",q);return}var s=o.name_val[0].name,p=1,t=0,u="";q.push(s);for(p=1,t=o.name_val.length;p<t;p+=1){u=o.name_val[p].name;if(s!==u){q.push(u)}else{break}}localDB.DeleteTable("alarm_dictionary");localDB.CreateTable("alarm_dictionary",q);var v=[];for(p=0,t=o.name_val.length;p<t;p+=1){v.push(o.name_val[p].val)}localDB.T_import("alarm_dictionary",v)}else{return}}function g(u){var p=0;if(u.length===0&&(USER.isAuthorised(-2)||USER.isAuthorised(-3))){baseInfoTreeObj.ADD(baseInfoTreeObj.rootID,p.toString(),"0","",Path.gotoLog,"",top.T.Tree.LogManagement,"4");p+=1;alert(top.T.Main.ErroNotice);baseInfoTreeObj.ON_OFF("1.0");return}if(USER.hasModule(Branch.Modules.WLANParams)){p=0;baseInfoTreeObj.ADD(baseInfoTreeObj.rootID,p.toString(),"","",AutoParamConfig.gotoWLANGuide,"",top.T.Tree.Guide,top.T.Tree.Guide);p+=1;baseInfoTreeObj.ADD(baseInfoTreeObj.rootID,p.toString(),"","",AutoParamConfig.gotoDeviceInfo,"",top.T.Tree.DeviceState,top.T.Tree.DeviceState);p+=1}var v=new ManTree("menu/menu.xml"),q=0,o=-1;v.initTree(baseInfoTreeObj);var s=0,t=0,x="",w="",r=-1;for(q=0;q<u.length;q+=1){o=baseInfoTreeObj.FIND_NODE_BY_NAME(u[q].CN_class,baseInfoTreeObj.root);if(o==-1){o=baseInfoTreeObj.FIND_NODE_BY_NAME(u[q].EN_class,baseInfoTreeObj.root)}if(o!=-1){p=baseInfoTreeObj.getMaxId(o)+1;s=0;for(s=0,t=u[q].branche.length;s<t;s+=1){if(Language==="EN"){x=u[q].branche[s].structName}else{x=u[q].branche[s].StructCnName==""?u[q].branche[s].structName:u[q].branche[s].StructCnName}w=USER.getStructLevel(u[q].branche[s].StructLevels,"s");r=baseInfoTreeObj.FIND_NODE_BY_NAME(x,o);if(r!=-1){continue}if(USER.isAuthorised(w)){if(u[q].branche[s].HasPrimarryKey==1){baseInfoTreeObj.ADD_BanUnique(o.nodeId,p.toString(),"","",Path.showMulLeaf,"",x,u[q].branche[s].structID+"@"+u[q].branche[s].structName)}else{baseInfoTreeObj.ADD_BanUnique(o.nodeId,p.toString(),"","",Path.showLeaf,"",x,u[q].branche[s].structID+"@"+u[q].branche[s].structName)}p+=1}}}}a();baseInfoTreeObj.OPEN_FST_LEVEL();baseInfoTreeObj.SHOW();baseInfoTreeObj.initFlag=true;if(USER.hasModule(Branch.Modules.ONE_FIVE_EIGHT_EIGHT_SERVER)){baseInfoTreeObj.ON_OFF("1.0.1")}else{if(!USER.hasModule(Branch.Modules.WLANParams)){}else{baseInfoTreeObj.ON_OFF("1.1");c()}}}function a(){var q=[];var t=$("#sidebar-left ul:first");var v=GetCookie("role");for(var r=0;r<baseInfoTreeObj.root.children.length;r++){if(""==baseInfoTreeObj.root.children[r].action){var u=baseInfoTreeObj.root.children[r].children.length;var p='<li><a class="dropmenu" href="#" onclick="$(this).parent().find(\'ul\').slideToggle(&quot;normal&quot;, switchMenu(this));"><i class="icon-folder-close-alt"></i>&nbsp;<span class="hidden-tablet">'+baseInfoTreeObj.root.children[r].additional+'</span><span class="label label-important">'+u+'</span></a><ul style="display:none;">';q.push(p);for(var s=0;s<baseInfoTreeObj.root.children[r].children.length;s++){var w='<li><a class="submenu" href="#" onclick="baseInfoTreeObj.ON_OFF(&quot;'+baseInfoTreeObj.root.children[r].children[s].nodeId+"&quot;);initBreadcrumb(&quot;"+baseInfoTreeObj.root.children[r].additional+"&quot;,&quot;"+baseInfoTreeObj.root.children[r].children[s].additional+'&quot;);activeMenu(this);"><i class="icon-file-alt"></i>&nbsp;<span class="hidden-tablet">'+baseInfoTreeObj.root.children[r].children[s].additional+"</span></a></li>";q.push(w)}q.push("</ul></li>")}else{var o='<li><a href="#" onclick="baseInfoTreeObj.ON_OFF(&quot;'+baseInfoTreeObj.root.children[r].nodeId+"&quot;);initBreadcrumb(&quot;&quot;,&quot;"+baseInfoTreeObj.root.children[r].additional+'&quot;);activeMenu(this);"><i class="icon-bar-chart"></i>&nbsp;<span class="hidden-tablet">'+baseInfoTreeObj.root.children[r].additional+"</span></a></li>";q.push(o)}}t.empty().append(q.join(""))}function c(){var o=window.location.hash;if(o==="#index"){LMT.cmdSyn("get LAN;",function(p){if(LMT.isCmdSuccess(p)){var q=LMT.parser(p),r=top.Struct.getValuesByMemberName(q,["GuideEnable"]);if(r[0]==="1"){AutoParamConfig.gotoWLANGuide()}}})}else{if(o==="#wait"){AutoParamConfig.gotoAutoParamsConfig()}}}}());var LocalTree=(function(){function f(j,h,g){switch(window.parseInt(h[g],10)){case 1:return true;case 2:return true;case 3:return true;case 4:return false;default:break}return true}function d(){var q=localDB.T_getColumn("c_param","StructID"),r=localDB.T_getColumn("c_param","StructName"),j=localDB.T_getColumn("c_param","IsPrimaryKey"),m=localDB.T_getColumn("c_param","StructCnName"),p=localDB.T_getColumn("c_param","Level"),u=localDB.T_getColumn("c_param","WebType"),g=localDB.T_getColumn("c_param","ClassifyName"),t=[],n="###",h=0,k=0,l={},s="";for(h=0,k=q.length;h<k;h+=1){l={};if(q[h]==="0"||q[h].length<3){continue}if(window.parseInt(u[h],10)===-2){s=q[h];while(s===q[h]){h+=1}h-=1;continue}if(!f(q,p,h)){continue}if(n===q[h]){if(j[h]==1){t[t.length-1].HasPrimarryKey=1}continue}else{if(j[h]==1){l.HasPrimarryKey=1}else{l.HasPrimarryKey=0}}n=q[h];l.structID=q[h];l.structName=r[h];l.StructCnName=m[h];l.StructLevels=p[h];l.Classify=g[h];t.push(l)}return t}function c(){var g={};g.type=-1;g.CN_class="";g.EN_class="";g.branche=[];return g}function b(){var g={};g.subType=-1;g.cnName="";g.enName="";g.structID="";g.structName="";g.leaf=[];return g}function a(s){var t=[],n=-1,m=0,p=0,r="",g={},q={},h="",k="",o=0,l=false,u=0;for(m=0,p=s.length;m<p;m+=1){r=s[m].Classify;if(t.length===0){g=c();q=b();q.structID=s[m].structID;q.structName=s[m].structName;q.HasPrimarryKey=s[m].HasPrimarryKey;q.StructCnName=s[m].StructCnName;q.StructLevels=s[m].StructLevels;q.Classify=r;h=q.Classify.split("|")[0];k=q.Classify.split("|")[1];q.cnName=(h==="")?r:h;q.enName=(k==="")?r:k;g.type=r;g.CN_class=q.cnName;g.EN_class=q.enName;g.branche.push(q);t.push(g)}else{for(o=0,u=t.length,l=false;o<u;o+=1){if(t[o].type===r){q=b();q.structID=s[m].structID;q.structName=s[m].structName;q.HasPrimarryKey=s[m].HasPrimarryKey;q.StructCnName=s[m].StructCnName;q.StructLevels=s[m].StructLevels;q.Classify=r;h=q.Classify.split("|")[0];k=q.Classify.split("|")[1];q.cnName=(h==="")?r:h;q.enName=(k==="")?r:k;t[o].branche.push(q);l=true;break}}if(!l){g=c();q=b();q.structID=s[m].structID;q.structName=s[m].structName;q.HasPrimarryKey=s[m].HasPrimarryKey;q.StructCnName=s[m].StructCnName;q.StructLevels=s[m].StructLevels;q.Classify=r;h=q.Classify.split("|")[0];k=q.Classify.split("|")[1];q.cnName=(h==="")?r:h;q.enName=(k==="")?r:k;g.type=r;g.CN_class=q.cnName;g.EN_class=q.enName;g.branche.push(q);t.push(g)}}}return t}function e(){var g=d();return a(g)}return{init:e}}());