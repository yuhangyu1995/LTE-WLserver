var ValidCheck=(function(){var l=0,d=0,k="",b="",f=/^\s*\(\s*/,n=/^\s*\)\s*/,g=/^\s*(>|<|>=|<=|==|!=)\s*(-?\d*\.?\d+|-?0[xX][a-fA-F0-9]+)/,o=/^\s*(-?\d*\.?\d+|-?0[xX][a-fA-F0-9]+)\s*(>|<|>=|<=|==|!=)/,m=/^\s*([\[\{])\s*(-?\d*\.?\d+|-?0[xX][a-fA-F0-9]+)\s*,\s*(-?\d*\.?\d+|-?0[xX][a-fA-F0-9]+)\s*((:)\s*(-?\d*\.?\d+|-?0[xX][a-fA-F0-9]+)\s*)?([\]\}])\s*/,h=/^\s*(-?\d*\.?\d+|-?0[xX][a-fA-F0-9]+)\s*$/;function c(t){var r=/-?0[xX][a-fA-F0-9]+/,s=/(-?)0*(\d*\.?\d+)/,q=[];if(!r.test(t)){q=s.exec(t);return q[1]+(String(q[2]).indexOf(".")===0?"0":"")+q[2]}else{return t}}function e(s,q){l=0;d=0;k=s;b=q;try{if(!h.test(b.toString())){return false}b=c(h.exec(b)[1]);return Boolean(i())}catch(r){throw new SyntaxError("Invalid Syntax")}}function i(){var q=a(),s=/^\s*\|\|\s*/,t="",r=false;while(l<k.length){t=k.substring(l);r=s.exec(t);if(r){l+=r[0].length;q=q||a()}else{if(k.charAt(l)===" "||k.charAt(l)==="\t"||k.charAt(l)==="\r"||k.charAt(l)==="\n"){l+=1}else{if(d<=0&&k.charAt(l)===")"){throw new SyntaxError(" ')' Mismatch '('")}else{if(k.charAt(l)===","){throw new SyntaxError("Invalid Syntax 1")}else{return q}}}}}return q}function a(){var r=p(),q=/^\s*&&\s*/,t="",s=false;while(l<k.length){t=k.substring(l);s=q.exec(t);if(s){l+=s[0].length;r=r&&p()}else{if(k.charAt(l)===" "||k.charAt(l)==="\t"||k.charAt(l)==="\r"||k.charAt(l)==="\n"){l+=1}else{if(d<=0&&k.charAt(l)===")"){throw new SyntaxError(" ')' Mismatch '('")}else{if(k.charAt(l)===","){throw new SyntaxError("Invalid Syntax 2")}else{return r}}}}}return r}function p(){var s,v=false,q=false,x="",u=false,r="",t="",w="",y="1";while(l<k.length){x=k.substring(l);u=f.exec(x);if(u){l+=u[0].length;q=true;d+=1;v=i()}else{if(k.charAt(l)===" "||k.charAt(l)==="\t"||k.charAt(l)==="\r"||k.charAt(l)==="\n"){l+=1}else{if(q){x=k.substring(l);u=n.exec(x);if(u){l+=u[0].length;d-=1;q=false;return v}else{throw new SyntaxError("Invalid Syntax 3")}}else{x=k.substring(l);u=g.exec(x);if(u){l+=u[0].length;r="";r=r.concat(b.toString()," ",u[0]);return eval(r)}u=o.exec(x);if(u){l+=u[0].length;r="";r=r.concat(u[0]," ",b.toString());return eval(r)}u=m.exec(x);if(u){l+=u[0].length;r="";t="";w="";y="1";if(u[1]==="["){t=" <= "}else{if(u[1]==="{"){t=" < "}}if(u[5]===":"){y=u[6]}if(u[7]==="]"){w=" <= "}else{if(u[7]==="}"){w=" < "}}r=r.concat(u[2],t,b.toString()," && ",b.toString(),w,u[3]," && ","Math.abs( ( (",b.toString()," - ",u[2]," ) * 1000000000 )"," % "," ( ",y," * 1000000000) ) < 1");return eval(r)}u=h.exec(x);if(u){l+=u[0].length;r="";r=r.concat(b.toString(),"==",parseInt(u[0],10));return eval(r)}throw new SyntaxError("Invalid Syntax")}}}}if(d>0){throw new SyntaxError(" '(' Mismatch ')'")}else{throw new SyntaxError("Invalid Syntax")}}return{IsValid:e}}());var RowEditor=(function(){var a,h=[],p=-1,m=100,b="",t="",k=[],n="";function s(){a(".x-grid3-row").removeClass("x-grid3-row-selected");h=[]}function d(w,y){if(a.trim(y)===""){return""}var v=0,u="<div class='x-grid3-row x-grid3-frist' onclick='top.RowEditor.selectRow(this)'>"+"<table class='x-grid3-row-table' cellspacing='0' cellpadding='0' border='0'>"+"<tr><td class='x-grid3-col x-grid3-cell x-grid3-td-number x-grid3-cell-first' tabindex='0'"+"        style='width:40px;"+" '>%s</td>"+"<td class='x-grid3-cell-other'>%s</td></tr></table></div>",x=function(){var z="";if(v===0){z=w}else{z=y}v+=1;return z};return u.replace(/%s/g,x)}function g(){var w=[],v=a(".x-grid3-row").find("td"),u=0;for(u=0;u<v.length;u+=1){if((u%2)===1){w.push(a(v[u]).text())}}return w}function q(){var v=0,w=1,u=[],x=g();if(typeof t==="function"){t(x,n)}for(v=0;v<x.length;v+=1){u.push(d(w,x[v]));w+=1}a(".x-grid3-row").remove();a(a(".x-grid3-body")[0]).append(u.join(""));m=w}function l(y){var v=top.globalCtrlBtn,A=top.globalShiftBtn,u=-1,w=-1,z=[],x=0;if(v===true&&A===true){v=false;A=false}if(v===false&&A===false){if(!a(y).hasClass("x-grid3-row-selected")){a(y).addClass("x-grid3-row-selected");h.push(a(y).index());p=a(y).index()}else{p=a(y).index();a(y).removeClass("x-grid3-row-selected");h.splice($.inArray(p,h),1)}}if(v===true&&A===false){a(y).addClass("x-grid3-row-selected");h.push(a(y).index());p=a(y).index()}if(v===false&&A===true){if(p!==-1){u=p<a(y).index()?p:a(y).index();u=u-1;w=p+a(y).index()-u;w=w-1;z=a(".x-grid3-row");for(x=u;x<w;x+=1){a(z[x]).addClass("x-grid3-row-selected");h.push(a(z[x]).index())}}}}function e(){var u=a(".x-grid3-row-selected").remove();q()}function f(){var u=a("#add-del-list-updata-editor-input"),w=a(u).val(),v="";v=d(m,w);if(typeof b==="function"){if(b(w,n)===false){return}}a(a(".x-grid3-body")[0]).prepend(v);q()}function r(){a("#x-grid3-scroller").fadeOut(200);if(a(".x-grid3-row").hasClass("x-grid3-row-selected")){a(".x-grid3-row").removeClass("x-grid3-row-selected");h=[]}else{a(".x-grid3-row").addClass("x-grid3-row-selected")}a("#x-grid3-scroller").fadeToggle(200)}function o(w){if(typeof w==="object"){b=w.check;t=w.valueChange;k=w.values;n=w.node}a(".x-grid3-row").remove();if(w.title.length>0){a("#list-table-title").text(w.title)}var v=[],u=0;for(u=0;u<k.length;u+=1){v.push(d(u+1,k[u]))}a(a(".x-grid3-body")[0]).append(v.join(""));a("#add-del-list").show(100)}function c(){a("#add-del-list").hide(100)}function i(u,v){a=u;h=[];var w="<br/><br/>"+"<div id='add-del-list' class='x-panel' style='display:none;'>"+"  <div id='add-del-list-main' class='x-panel-bwrap'>"+"    <div id='add-del-list-body' class='x-panel-body x-border-layout-ct' style='height: 363px;'>"+"      <div id='add-del-list-grid-action' class='x-toolbar x-small-editor x-toolbar-layout-ct'>"+"        <table class='x-toolbar-ct' cellspacing='0'>"+"          <tr>"+"            <td style='width:60px;'><a class='btn1' id='rowEditorSelectAllBtn'> <span  style='border: 0px none;'>"+top.T.BTN.SelectAll+"</span></a></td>"+"            <td style='width:60px;'><a class='btn1' id='rowEditorRemoveBtn'> <span style='border: 0px none;'>"+top.T.BTN.Delete+"</span> </a></td>"+"            <td style='padding-left:40px; width:100px;'><input id='add-del-list-updata-editor-input' type='text' height='18'></td>"+"            <td><a id='add-del-list-updata-editor-confirm' class='btn1'><span style='border: 0px none;'>"+top.T.BTN.Add+"</span></a></td>"+"          </tr>"+"        </table>"+"      </div>"+"      <div class='x-panel-body x-panel-body-noheader' style='height: 330px; margin: auto;'>"+"        <div class='x-grid3-title'><table><tbody><tr><td class='tdIndex'>"+top.T.ParamView.Index+"</td><td id='list-table-title'></td></tr></tbody></table></div>"+"        <div id='x-grid3-scroller' class='x-grid3-scroller' style='height: 310px;'>"+"          <div class='x-grid3-body'></div>"+"        </div>"+"      </div>"+"    </div>"+"  </div>"+"</div>";a("#"+v).empty().append(w);a("#rowEditorRemoveBtn").bind("click",top.RowEditor.remove);a("#rowEditorSelectAllBtn").bind("click",top.RowEditor.selectAll);a("#add-del-list-updata-editor-confirm").bind("click",top.RowEditor.addAction)}return{init:i,selectAll:r,selectRow:l,remove:e,addAction:f,openList:o,allValues:g,doClose:c}}());var ArrayView=(function(){var a="";function c(w){a=w;$("#configTable").empty();$("#warning_tit").text("");$("#array_table_submit").unbind().bind("click",(ArrayView.submit));var H=$(w).attr("structname"),u=$(w).attr("name"),s=$(w).attr("memberid"),F=localDB.T_search("c_param","StructName",H),v=top.c_paramRowIndex.MemberName,t=top.c_paramRowIndex.MemberID,N=top.c_paramRowIndex.TypeDesc,Q=top.c_paramRowIndex.WebType,q=top.c_paramRowIndex.Level,r=null,m=0,p=0;for(m=0,p=F.length;m<p;m+=1){if(F[m][t]===s){r=F[m];break}}var R=0,L="",f=1,g="",x="",A=GetCookie("role"),P=parseInt(r[Q],10),B=0,k="",l="",D=[];if(A!==top.Roles.Root){if((P>=10&&P<=19)||(P>=100&&P<=119)){if((!w.forceChangable)){g='readonly="readonly"';x=";background:#ffffff;opacity:0.4;filter:alpha(opacity=50);"}}}B=window.parseInt(Transfer.parseDbColumn(r[N]),10);D=Transfer.parseDbColumn(r[q]).split("|");if(D.length>0){k=D[0]}if(D.length>=2){if(top.Language==="EN"){l="("+D[6]+")"}else{l="("+D[1]+")"}}$("#dialog_tit").text(top.T.Main.ArrayConfig+"("+top.T.Main.Unit+":"+k+")"+l);var m=1,K="<tr>",I="<tr>",n="",O="",o=0,h=11,C=0;if((B%h)!==0){C=window.parseInt(B/h)+1}else{C=window.parseInt(B/h)}var J=0;if(C<=8){J=46*C+4}else{J=46*8}J=J+10;if(B<128){$("#array_table").css("left","25%");$("#array_table").css("top","10%")}$("#configTable_div").width(660);$("#configTable_div").height(J);for(m=1;m<=B;m+=1){o+=1;I=I+"<td>"+(m-1)+"</td>";K=K+"<td>"+"<input structname='"+H+"' memberName='"+u+"' memberid='"+s+"' class='textInput' "+g+" style='"+x+"' onFocus='input_focus(this)' onBlur='input_blur(this)' onchange='input_changed(this)' id='int"+(m-1)+"' value='' type='text'  "+L+" />"+"</td>";if(m===B){K=K+"</tr>";I=I+"</tr>";O=O+I+K;break}if(o===h){K=K+"</tr>";I=I+"</tr>";O=O+I+K;K="<tr>";I="<tr>";o=0}}$("#configTable").append(O);var E=$(w).val(),e=[],z=/\d*/g;R=E.match(z);m=0;for(m=0;m<R.length;m+=1){if(R[m]!==""){e.push(R[m])}}var y=0,M;for(m=0;m<e.length;m+=2){y=window.parseInt(e[m],10);temp="#int"+y;$(temp).val(e[m+1])}$("#array_table").focus();$("#coverPage").show();$("#array_table").show()}function b(){$("#array_table").hide();$("#coverPage").hide()}function d(){var v="a",u=v+"[id]",w="",o=$("#array_table input[type='text']").length,m="",f=[],H="",x="",C=$("#int0").attr("structname"),s=$("#int0").attr("membername"),q=$("#int0").attr("memberid"),B=localDB.T_search("c_param","StructName",C),t=top.c_paramRowIndex.MemberName,r=top.c_paramRowIndex.MemberID,z=top.c_paramRowIndex.Regex,p=null,l=0,n=0,A="",y,k=false;for(l=0,n=B.length;l<n;l+=1){if(B[l][r]===q){p=B[l];break}}A=Transfer.parseDbColumn(p[z]).replace(/\\\\/g,"\\");for(l=0;l<o;l+=1){m="#int"+(l);H=$(m).val();if(typeof(A)!=="undefined"&&A!==""){y=new RegExp(A,"g");k=y.test(H);if(!k){$("#warning_tit").text(top.T.AlertInfo.FocusValueOutRange);$(m).focus();return}}f.push(l,H);x=x+H+","}x=x.replace(/,*$/,"");var D="";for(l=0;l<f.length;l+=2){if(f[l+1]!=""){D=u;D=D.replace("id",f[l])+"="+f[l+1]+",";w=w+D}}var E=w+"*"+x,F=[];if(E!=null){F=E.split("*");if(a.value!=F[0]){a.value=F[0];$(a).attr("proto",F[1]);$(a).keyup();try{var g=document.getElementById("contentMainFrame").contentWindow.$;g(a).keyup()}catch(h){}}}$("#array_table").hide();$("#coverPage").hide()}return{show:c,close:b,submit:d}}());var BitMapView=(function(){var a="";function c(z){a=z;$("#configTable").empty();$("#warning_tit").text("");$("#array_table_submit").unbind().bind("click",(BitMapView.submit));var I=$(z).attr("structname"),x=$(z).attr("name"),v=$(z).attr("memberid"),H=localDB.T_search("c_param","StructName",I),y=top.c_paramRowIndex.MemberName,w=top.c_paramRowIndex.MemberID,N=top.c_paramRowIndex.TypeDesc,P=top.c_paramRowIndex.WebType,t=top.c_paramRowIndex.Level,u=null,p=0,r=0,s=0,m={},l=0,E=0,M=0,J=0,O=0,g=1,h="",A="",K="",D=GetCookie("role"),B=0;for(p=0,s=H.length;p<s;p+=1){if(H[p][w]===v){u=H[p];break}}m=eval("("+$.trim(u[N])+")");M=m.total;l=m.cols;K=m.tips;O=parseInt(u[P],10);if((M%l)!==0){E=window.parseInt(M/l)+1}else{E=window.parseInt(M/l)}J=0;if(E<=8){J=46*E+4}else{J=46*8}J=J+10;if(D!==top.Roles.Root){if((O>=10&&O<=19)||(O>=100&&O<=119)){if((!z.forceChangable)){h='readonly="readonly"';A=";background:#ffffff;opacity:0.4;filter:alpha(opacity=50);"}}}$("#dialog_tit").text(top.T.Main.ArrayConfig);$("#array_table").css("left","10px");$("#array_table").css("top","10px");$("#configTable_div").width(660);$("#configTable_div").height(J);var C=0,k=0,L,F="",o="";L="<tr><td></td>";for(k=0;k<l;k++){L=L+"<td>"+(k+1)+"</td>"}L=L+"</tr>";o=o+L;for(C=0;C<E;C++){F="<tr>"+"<td>"+K+(C+1)+"</td>";for(k=0;k<l;k++){F+="<td>";if((C*l)+(k+1)<=M){F=F+"<input type='checkbox' structname='"+I+"' memberName='"+x+"' memberid='"+v+"' id='bitCheckbox"+((C*l)+k+1)+"' />"}F+="</td>"}F=F+"</tr>";o+=F}$("#configTable").append(o);var f=1,q="";B=$(z).attr("proto");try{for(k=0;k<31;k++){q="#bitCheckbox"+(k+1).toString();if(f&parseInt(B)){$(q).attr("checked",true)}f=(f<<1)}}catch(n){}$("#array_table").focus();$("#coverPage").show();$("#array_table").show()}function b(){$("#array_table").hide();$("#coverPage").hide()}function d(){var l=0,m="",k=0,n="";var f=$("input[id^=bitCheckbox]");for(k=0;k<f.length;k++){if($(f[k]).is(":checked")){m="1"+m}else{m="0"+m}}l=parseInt(m,2);n="bitMap("+l+")";if(a.value!==n){a.value=n;$(a).attr("proto",l);$(a).keyup();try{var g=document.getElementById("contentMainFrame").contentWindow.$;g(a).keyup()}catch(h){}}$("#array_table").hide();$("#coverPage").hide()}return{show:c,close:b,submit:d}}());var Help=(function(){var p=null,k="Chinese",m,l,n,o;function h(){var q=null;$.ajax({type:"post",url:"/menu/help.xml",async:false,dataType:"xml",success:function(r,s){q=r},error:function(){throw new Error("get xml error")}});return q}function i(){m=top.c_paramRowIndex.MemberCnName;l=top.c_paramRowIndex.MemberName;n=top.c_paramRowIndex.StructCnName;o=top.c_paramRowIndex.StructName;if(top.Language==="EN"){m=l;n=o;k="English"}}function c(q){if(!p){p=h();i()}var t=[],s=[],r=[];q.each(function(u){s.push($($(this).parent().parent().parent().children("td")[0]).text());t.push($(this).attr("structid"));r.push($(this).attr("memberid"))});return b(t,s,r)}function b(y,u,s){if(p){var q=0,r,t,x,A,v="",z="",w="";for(q=0;q<s.length;q+=1){r=s[q];t=u[q];z=f(r);if(z!==""){w+="<label id='Tips_"+r+"'>";w+="<b>"+t+"</b>"+z+"</label>"}}return w}else{return""}}function f(u){var v=$(p).find("struct > member"),s=[],t,w,q,r="";for(t=0;t<v.length;t+=1){if(u===$(v[t]).attr("id")){q=$(v[t]).children(k);r=$(q).text();break}}return $.trim(r)}function a(){if(!p){p=h();i()}return e()}function d(s){var r=0,q="",t=$(p).find("root > struct");for(r=0,len=t.length;r<len;r+=1){q=$(t[r]).attr("id");if(q===s){return t[r]}}}function g(z){var s=[],t=0,x=d(z),w=$(x).children(),y=localDB.T_search("c_param","StructID",z);if(y.length===0){return""}for(t=0,len=w.length;t<len;t+=1){var u=$(w[t]).attr("id"),v="",q=$(w[t]).children(k),r=$(q).text();if(u!==null){if($.trim(r)!==""){v=y[t][m];if($.trim(v)===""){v=y[t][l]}s.push("<label id='Tips_"+u+"' onmouseover='tr_over_help(this)' onmouseout='tr_out_help(this)' ><b>"+v+":</b>"+r+"</label><br/>")}}}return s.join("")}function e(){var w=$(p).find("root > struct"),q=[],r,s=w.length,u,v,t;for(r=0;r<s;r+=1){u=$(w[r]).attr("id");t=localDB.T_search("c_param","StructID",u);if(t.length>0){v=t[0][n];if(v===""){v=t[0][o]}q.push("<div class='infoTitle'><a href='javascript:void(0)' structID='"+u+"' onclick='openAndClose(this)' state='close'>"+v+"</a></div>");q.push('<div class="helpAll" id="'+u+'"></div>')}}return q.join("")}return{get:c,all:a,getStruct:g}}());(function(){var g=null,k=false,e={};RELATION=function(){k=false};RELATION.prototype={isChanged:function(){return k},update:function(H){k=false;var F=top.objectClone(H),C=F.structDesc,E=top.c_paramRowIndex.StructID,K=top.c_paramRowIndex.WebType,v=top.c_paramRowIndex.MemberID,D=F.structDesc[0][E],y=null,z=[];y=f(D);if(y===null||$(y).attr("type")==="postProcess"){return F}z=$(y).children();if(!z||z.length===0){return F}var B=null,r=[],s=[],A=[],n=0,t=0,p=0,o=0,I,J,x,w,q=0,u=0;for(n=0,t=z.length;n<t;n+=1){r=$(z[n]).attr("keyMemberID");r=l(r);s=top.Struct.getValuesByMemberID(F,r);A=$(z[n]).children();B=null;for(p=0,o=A.length;p<o;p+=1){B=$(A[p]).attr("key-value");B=l(B);if(b(s,B)){I=l($(A[p]).attr("subMemberID"));J=l($(A[p]).attr("action"));x=l($(A[p]).attr("reg-exp"));w=l($(A[p]).attr("msg"));if(I.length!==J.length){break}for(q=0;q<I.length;q+=1){for(u=0;u<C.length;u+=1){if(I[q]===C[u][v]){C[u][K]=a(J[q],C[u][K]);break}}}k=true;break}}}F.structDesc=C;return F},delayEvent:function(n,p){e.structid=n;e.j$=p;relate_group=f(n);if(relate_group===null||$(relate_group).attr("type")!=="postProcess"){return 0}relate_rules=$(relate_group).children();if(!relate_rules||relate_rules.length===0){return 0}var m=0,o=0,q,r;for(m=0;m<relate_rules.length;m+=1){q=l($(relate_rules).attr("keyMemberID"));for(o=0;o<q.length;o+=1){r="#"+n+"_"+q[o]+"_0";p(r).unbind("change",(this.preDoEvent)).bind("change",e,(this.preDoEvent))}}setTimeout(c,500)},preDoEvent:function(m){c()}};function c(){var m=top.CurrentStructs.get(e.structid);d(m,e)}function d(J,n){var I=J,E=I.structDesc,H=top.c_paramRowIndex.StructID,M=top.c_paramRowIndex.WebType,w=top.c_paramRowIndex.MemberID,F=I.structDesc[0][H],z=null,A=[];z=f(F);if(z===null||$(z).attr("type")!=="postProcess"){return 0}A=$(z).children();if(!A||A.length===0){return 0}var C=null,s=[],t=[],B=[],o=0,u=0,q=0,p=0,K,L,y,x,r=0,v=0;for(o=0,u=A.length;o<u;o+=1){s=$(A[o]).attr("keyMemberID");s=l(s);t=top.Struct.getValuesByMemberID(I,s);B=$(A[o]).children();C=null;for(q=0,p=B.length;q<p;q+=1){C=$(B[q]).attr("key-value");C=l(C);if(b(t,C)){K=l($(B[q]).attr("subMemberID"));L=l($(B[q]).attr("action"));y=l($(B[q]).attr("reg-exp"));x=l($(B[q]).attr("msg"));if(K.length!==L.length){break}var D="";for(r=0;r<K.length;r+=1){D="#"+n.structid+"_"+K[r]+"_0";switch(L[r]){case"e":n.j$(D).parent().parent().show();n.j$(n.j$(D).children()[0]).removeAttr("disabled");break;case"d":n.j$(D).parent().parent().show();n.j$(n.j$(D).children()[0]).attr("disabled","disabled");break;case"h":n.j$(D).parent().parent().hide();break;default:}}break}}}return 1}function a(m,n){n=window.parseInt(n,10);if(m==="d"){return WebTypeObj.toDisable(n)}else{if(m==="e"){return WebTypeObj.toEnable(n)}else{if(m==="h"){return -1}}}return n}function b(m,n){if(m.length!==n.length){return false}var o=0,p=0;for(o=0,p=m.length;o<p;o+=1){if((m[o]!==n[o])&&(n[o]!=="any")){return false}}return true}function f(q){var m=h(),o="",n=0,p=0;if(!m||m.length===0){return null}for(n=0,p=m.length;n<p;n+=1){o=l($(m[n]).attr("structid"));if(o[0]===q){return m[n]}}return null}function h(){if(g===null){g=i();if(g===null){return[]}}return $(g).find("relate-container > relate-group")}function l(n){try{return eval(n)}catch(m){return[]}}function i(){var n="conf/dbRef.xml",m=null;$.ajax({type:"get",url:"conf/dbRef.xml",async:false,dataType:"xml",success:function(o,p){m=o},error:function(){throw new Error("get xml error")}});return m}}());var globalShiftBtn=false,globalCtrlBtn=false;function bindGlobalEvent(){var c={},d=new Date(),a=null,b=null;c.enable=false;c.checktime=function(){var e=new Date(),f=e-d;if(f>5*60*1000&&c.enable){System.logout(1)}};c.mmove=function(){d=new Date()};c.keyDown=function(e){d=new Date();var f=e||window.event;if(f){if(f.shiftKey){globalShiftBtn=true}else{if(f.ctrlKey){globalCtrlBtn=true}}}};c.keyUp=function(e){var f=e||window.event;if(f){if(f.shiftKey){globalShiftBtn=false}else{if(f.ctrlKey){globalCtrlBtn=false}}}};a=document.getElementById("contentMainFrame");$(a).load(function(){$(window.frames["mainFrame"].document).keydown(c.keyDown);$(window.frames["mainFrame"].document).keyup(c.keyUp);$(window.frames["mainFrame"].document).mousemove(c.mmove)});b=document.getElementById("wlan_guide_iframe");$(b).load(function(){$(window.frames["iframe_guide"].document).keydown(c.keyDown);$(window.frames["iframe_guide"].document).keyup(c.keyUp);$(window.frames["iframe_guide"].document).mousemove(c.mmove)});$(document).keydown(c.keyDown);$(document).keyup(c.keyUp);$(document).mousemove(c.mmove);return setInterval(c.checktime,3000)}function valueCheck(J,h){var F=J.structDesc,H=top.c_paramRowIndex.StructID,v=top.c_paramRowIndex.MemberID,T=top.c_paramRowIndex.WebType,B=top.c_paramRowIndex.Regex,w=top.c_paramRowIndex.MemberName,u=top.c_paramRowIndex.MemberCnName,I=top.c_paramRowIndex.StructName,p=top.c_paramRowIndex.IsPrimaryKey,Q=top.c_paramRowIndex.ValueType,t=top.c_paramRowIndex.Level,R=0,r=0,f=0,S=-1,d="",k=true,K="",l="",y=0,x=[],N=[],b={},a={},O=[],c="",m=0,q=0,L="",s="",z=0,n="",o=false;if(!J.sLength){J.sLength=J.structDesc.length}for(R=0,r=J.name_val.length;R<r;R+=1){f=R%J.sLength;if(!J.name_val[R].changed){continue}S=window.parseInt(F[f][T],10);if(S===2||S===12||S===102){continue}d=$.trim(Transfer.parseDbColumn(F[f][B]));if(d!==""&&d!=="*"){k=true;K=$.trim(J.name_val[R].val);try{if(d.indexOf("B:")===0){d=d.substring(2,d.length);k=ValidCheck.IsValid(d,K)}else{if(d.indexOf("C:")===0){l=d.substring(2,d.length);y=l.indexOf("(");if(y>0){x=l.substring(y+1,l.length-1);l=l.substring(0,y);n=new RegExp("^(\\d{1,},{0,1})+$");o=n.test(x);x=x.split(",");if(o===false){N=Struct.getValuesByMemberName(J,x)}else{N=Struct.getValuesByMemberID(J,x)}k=window[l](N)}else{k=window[l](K)}}else{if(d.indexOf("D:")===0){O=[];d=$.trim(d);b=d.substring(2,d.length);b=b.split("#");d=$.trim(b[0]);a=eval("("+$.trim(b[1])+")");if(K.length>a.maxLength){k=false}else{if(K.length===0){if(!a.nullEnable){k=false}else{k=true}}else{O=K.split(",");if(O.length<a.minItems){k=false}else{if(a.maxItems!==-1&&O.length>a.maxItems){k=false}else{c="";for(m=0;m<O.length;m+=1){O[m]=$.trim(O[m])}for(m=0;m<O.length;m+=1){c=O[m];if(a.unique){for(q=m+1;q<O.length;q+=1){if(c===O[q]){k=false;break}}if(!k){break}}k=ValidCheck.IsValid(d,c);if(!k){break}}}}}}if(k){var C="";for(m=0;m<O.length;m+=1){C+=O[m]+","}K=C.substring(0,C.length-1)}}else{if(d.indexOf("A:")===0){d=d.substring(2,d.length)}var A=new RegExp(d.replace(/\\\\/g,"\\"),"g"),P=F[f][Q].toLowerCase(),D,M,E;if(P.indexOf("int")!==-1){if(K.toString().indexOf("0x")===0||K.toString().indexOf("0X")===0){D=/^[a-fA-F0-9]+$/;M=K.substring(2,K.length);E=D.test(M);if(E){K=window.parseInt(K,16)}}}k=A.test(K)}}}}catch(g){k=true;logger("Exception: Regex error! struct[id="+F[f][H]+"],member[id="+F[f][v]+"],Regex="+Transfer.parseDbColumn(F[f][B]))}if(!k){s=Transfer.parseDbColumn(F[f][t]);z=s.split("|");if(Language==="EN"){L=F[f][w];if(z.length>=7&&z[6]!==""){z="<br>"+z[6]}else{z=""}}else{L=(F[f][u]==="")?F[f][w]:F[f][u];if(z.length>=2&&z[1]!==""){z="<br>"+z[1]}else{z=""}}L="["+L+"] ";if(typeof(h)==="undefined"||h===null){ModalCommon.open(top.T.AlertInfo.InputError,L+top.T.AlertInfo.InputAgain+z,"error")}else{ModalCommon.open(top.T.AlertInfo.InputError,h+L+top.T.AlertInfo.InputAgain+z,"error")}return false}J.name_val[R].val=$.trim(K)}}return true}var G={PageRows:18};var CurrentStructs=(function(){var b=[];function h(){b=[]}function m(y){if(y.structDesc.length<1){return}var x=y.structDesc[0][top.c_paramRowIndex.StructID],v=0,w=b.length;for(v=0;v<w;v+=1){if(b[v][0]===x){b[v][1]=y;break}}if(v===w){b.push([x,y])}}function f(x){if(typeof(x)==="undefined"){return b[0][1]}else{var v=0,w=b.length;for(v=0;v<w;v+=1){if(b[v][0]===x){return b[v][1]}}}return null}function c(x){var v=0,w=b.length;if(typeof(x)==="undefined"){return}else{for(v=0;v<w;v+=1){if(b[v][0]===x){b.splice(v,1);break}}}return null}function e(v,z,y){var w=0,x=b.length;if(z){for(w=0;w<x;w+=1){if(b[w][0]===z){d(v,b[w][1],y);break}}}else{for(w=0;w<x;w+=1){d(v,b[w][1],y)}}}function d(v,P,K){var C=0,H=0,x=0,y=P.structDesc.length,z="",T="",E=0,F=0,J={},S,w=[],D=Struct.isMulInstance(P.structDesc),L=0,I=top.c_paramRowIndex.MemberID,O=top.c_paramRowIndex.StructID,Q={},M=[],N=[],R=top.c_paramRowIndex.TypeDesc,B=P.name_val.length;if(D){if(typeof(K)==="undefined"){K=1}C=(K-1)*y*G.PageRows;B=C+y*G.PageRows;if(B>P.name_val.length){B=P.name_val.length}L=(K-1)*G.PageRows}for(H=B;C<H;C+=1){x=C%y;z="#"+P.structDesc[x][O]+"_"+P.structDesc[x][I]+"_";if(D){z+=L.toString();if(((C+1)%P.sLength)===0){L+=1}}else{z+="0"}T=window.parseInt(v(z).attr("memberType"),10);J=v(z).children()[0];if(!J){continue}switch(T){case -1:break;case 1:S=P.name_val[C].val.toLowerCase();Q=v(J).children("option");for(E=0,F=Q.length;E<F;E+=1){if(v(Q[E]).attr("value").toLowerCase()===S){S=v(Q[E]).attr("value");break}}v(J).val(S);break;case 11:S=P.name_val[C].val.toLowerCase();Q=v(J).children("option");for(E=0,F=Q.length;E<F;E+=1){if(v(Q[E]).attr("value").toLowerCase()===S){S=v(Q[E]).attr("value");v(J).next().html(v(Q[E]).html());break}}v(J).val(S);break;case 2:case 12:v(J).attr("proto",P.name_val[C].val);S=t(P.name_val[C].val);v(J).val(S);break;case 4:case 14:w=v("#"+P.name_val[C].name).children();S=window.parseInt(P.name_val[C].val,2).toString();for(E=0,F=S.length;E<F;E+=1){if(S.charAt(E)==="1"){v(w[E]).attr("checked",true)}}break;case 5:case 15:v(J).attr("proto",P.name_val[C].val);break;case 6:case 16:if(P.name_val[C].val==="1"){v(J).attr("checked",true)}break;case 7:break;case 8:S=v.trim(P.name_val[C].val);try{Q=top.Transfer.wtListParser(P.structDesc[C][R]);M=Q.selectNames;N=Q.selectVals;if(M.length===0||M.length!==N.length){v(J).text(S)}else{for(E=0;E<N.length;E+=1){if(S===v.trim(N[E])){v(J).text(M[E]);break}}if(E===N.length){v(J).text(S)}}}catch(A){v(J).text(S)}break;case 9:S=P.name_val[C].val;v(J).attr("proto",S);v(J).val("bitMap("+S+")");break;case 20:S=P.name_val[C].val.toLowerCase();Q=v(J).children("option");for(E=0,F=Q.length;E<F;E+=1){if(v(Q[E]).attr("value").toLowerCase()===S){S=v(Q[E]).attr("value");break}}v(J).val(S);break;case 10:v(J).text(P.name_val[C].val);break;default:v(J).val(P.name_val[C].val);break}}}function a(D){var y=D.name_val;var z=0;var x=s(D);var F=[0,1,2,3,4,5,6,7];var A=[];if(x.length>0){for(var v=0;v<x.length;v++){var w=x[v];for(var B=0;B<F.length;B++){var E=F[B];if(w==E){A.push(B)}}}}else{return F[0]}var C=o(F,A);return F[C[0]]}function s(z){var y=z.name_val;var v=z.structDesc.length;var x=[];for(var w=0;w<y.length;w+=v){x.push(y[w].val)}return x}function o(B,x){var A=[];var y=0;var w=0;var z=B.length;for(var v=0;v<B.length;v++){if(!q(v,x)){A.push(v)}}return A}function r(w){var x=[532480,532500,532520,532540,532560,532580,532600,532620];var v=532480;if(w){v=x[w]}return v}function q(x,y){var v=false;for(var w=0;w<y.length;w++){if(x==y[w]){v=true;return v}}return v}function t(y){var x=/\d+/g,A=y.match(x),v=0,w=0,z="";if(A&&A.length>0){for(v=0,w=A.length;v<w;v+=1){z+="a["+v+"]="+A[v]+","}}else{z=","}return z.substring(0,z.length-1)}function u(B,C,A,F,v){var w=0,z=b.length,E={},D=0,x=0,y=0;if(v==="undefined"||v===""){v="0"}v=window.parseInt(v,10);for(w=0;w<z;w+=1){if(C===b[w][0]){E=b[w][1];D=E.sLength||0;y=E.sLength||E.name_val.length;for(x=v*D,y=x+y;x<y;x+=1){if(E.name_val[x].name===A){if(E.name_val[x].val===F){return}else{E.name_val[x].changed=true;E.name_val[x].val=F;if($(B).is("input")&&$(B).attr("type")!=="button"){$(B).addClass("textInput textInputUpdate")}$(B).data("changed",true);break}}}break}}}function p(I){var y=0,B=b.length,z=0,A=0,E=null,w=true,x=[],v=null,C=false,D=[],J={},K=[],H=top.c_paramRowIndex.SetStatus,F="";if(typeof(I)==="undefined"){for(y=0;y<B;y+=1){J=b[y][1];if(J.matrix){K=K.concat(MatrixStruct.set())}else{K.push(J)}}}else{for(y=0;y<B;y+=1){if(b[y][0]===I){J=b[y][1];if(J.matrix){K=K.concat(MatrixStruct.set())}else{K.push(J)}break}}}for(j=0;j<K.length;j+=1){E=g(K[j]);w=w&&E.checked;if(w){x=x.concat(E.cmd)}}if(w&&H!=-1){for(y=0;y<K.length;y++){for(j=0;j<K[y].name_val.length;j++){if(K[y].name_val[j].changed==true){F=K[y].structDesc[j%(K[y].structDesc.length)][H];if(F=="1"||F==1){D.push(K[y].name_val.name);C=true}}}}if(window.console){console.log("Check param needed reboot or not: needReboot="+C)}}if(w){if(x.length!==0){v=Struct.setStructsByCmds(x);if(v.result==="000"){if(C){ModalCommon.open(top.T.Main.Notice,top.T.AlertInfo.SaveSuccess+","+top.T.AlertInfo.NeedReboot,"reboot")}else{ModalCommon.open(top.T.Main.Notice,top.T.AlertInfo.SaveSuccess,"ok")}if(typeof(I)==="undefined"){for(y=0;y<B;y+=1){for(z=0,A=b[y][1].name_val.length;z<A;z+=1){b[y][1].name_val[z].changed=false}}}else{for(y=0;y<B;y+=1){if(b[y][0]===I){for(z=0,A=b[y][1].name_val.length;z<A;z+=1){b[y][1].name_val[z].changed=false}break}}}return true}else{if(v.result==="004"){ModalCommon.open(top.T.Main.Notice,v.hint,"error")}else{ModalCommon.open(top.T.Main.Notice,v.protoContent,"error")}return false}}else{ModalCommon.open(top.T.Main.Notice,top.T.AlertInfo.ParamValueNoChangeInfo,"ok");return true}}else{return false}}function g(K){var I=K.structDesc,w=0,x=I.length,y=0,z=0,F=0,D=top.c_paramRowIndex.MemberName,J=top.c_paramRowIndex.StructName,A=top.c_paramRowIndex.IsPrimaryKey,L=[],M=[],E=0,B=0,C=0,v={},H={checked:false,cmd:[]};if(!valueCheck(K)){return H}else{H.checked=true}if(Struct.isMulInstance(I)){z=K.name_val.length/x;for(y=0;y<z;y+=1){L=[];M=[];E=0;for(B=y*x,C=B+x;B<C;B+=1){w=B%x;F=window.parseInt(I[w][A],10);if(K.name_val[B].changed||F===1){L.push(I[w][D]);M.push(K.name_val[B].val);if(F===1){E+=1}}}if(L.length>E){H.cmd.push(CMDBuider.lmtCreateSetReq(I[0][J],L,M))}}}else{for(B=0,C=K.name_val.length;B<C;B+=1){if(K.name_val[B].changed){L.push(I[B][D]);M.push(K.name_val[B].val)}}if(L.length>0){H.cmd.push(CMDBuider.lmtCreateSetReq(I[0][J],L,M))}}return H}function n(x){var v=0,w=b.length,A={},y="",z=top.c_paramRowIndex.StructName;for(v=0;v<w;v+=1){if(b[v][0]===x){A=b[v][1];y=A.structDesc[0][z];b[v][1]=Struct.getStructByName(y);break}}}function l(D){var w=0,z=0,A=b.length,E={},C={changed:false,val:"",type:"string",name:""},B=top.c_paramRowIndex.MemberName,H="",x=[],F=0,y=top.c_paramRowIndex.IsPrimaryKey,v=top.c_paramRowIndex.DefaultValue;for(w=0;w<A;w+=1){if(b[w][0]===D){E=b[w][1];E.name_val=[];for(z=0;z<E.structDesc.length;z+=1){C.name=E.structDesc[z][B];if(v>0){C.val=E.structDesc[z][v]}E.name_val.push(top.objectClone(C));H=Transfer.parseDbColumn(E.structDesc[z][top.c_paramRowIndex.Level]);x=H.split("|");if(x.length>=6&&x[5].length>=1){F=window.parseInt(x[5],10)}else{F=0}if(window.parseInt(E.structDesc[z][y],10)===1||F===1){E.name_val[z].changed=true}}break}}}function i(E){var x=0,z=0,B=b.length,A=0,F="",J={},H="",C=[],K=[],w="",v={},D=0,y=top.c_paramRowIndex.IsPrimaryKey,I=top.c_paramRowIndex.StructName;F=E+"Add";for(x=0;x<B;x+=1){if(b[x][0]===F){J=b[x][1];if(!valueCheck(J)){return}H=J.structDesc[0][I];for(z=0,A=J.structDesc.length;z<A;z+=1){D=window.parseInt(J.structDesc[z][y],10);if(J.name_val[z].changed||D===1){C.push(J.name_val[z].name);K.push(J.name_val[z].val)}}w=CMDBuider.lmtCreateAddReq(H,C,K);v=LMT.cmdAsyn(w);v=LMT.parser(v);if(v.result==="000"){ModalCommon.open(top.T.Main.Notice,top.T.AlertInfo.SaveSuccess,"ok");l(F);return true}else{if(v.result==="004"){ModalCommon.open(top.T.Main.Notice,v.hint,"error")}else{ModalCommon.open(top.T.Main.Notice,v.protoContent,"error")}}break}}return false}function k(I,A){var J="",H=[],M=[],L={},w=0,x=0,z=0,F=0,D=0,E=0,v=null,y=null,C=top.c_paramRowIndex.IsPrimaryKey,B=0,K=top.c_paramRowIndex.StructName;for(z=0,F=b.length;z<F;z+=1){if(b[z][0]===I){L=b[z][1];break}}J=L.structDesc[0][K];x=L.structDesc.length;for(z=0,F=A.length;z<F;z+=1){H=[];M=[];for(D=A[z]*x,E=D+x;D<E;D+=1){w=D%x;if(window.parseInt(L.structDesc[w][C],10)===1){H.push(L.name_val[D].name);M.push(L.name_val[D].val)}}v=Struct.deleteStruct(J,H,M);if(v.result!=="000"){y=v}}if(y!==null){if(y.result==="004"){ModalCommon.open(top.T.Main.Notice,y.hint,"error")}else{ModalCommon.open(top.T.Main.Notice,y.protoContent,"error")}return false}else{ModalCommon.open(top.T.Main.Notice,top.T.AlertInfo.SaveSuccess,"ok");return true}}return{init:h,push:m,del:c,get:f,evaluation:e,update:u,save:p,refresh:n,name_valInit:l,instanceAdd:i,instanceDel:k,autoIncreaseId:a,setUsCodeImc:r}}());