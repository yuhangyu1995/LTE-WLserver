$(function(){var b=function(d,j){var m=null,e=d[0].getContext("2d"),k=2*Math.PI,h,i,n,o,l=this;this.onChange=function(){};this.onCancel=function(){};this.onRelease=function(){};this.val=function(q){if(null!=q){j.stopper&&(q=Math.max(Math.min(q,j.max),j.min));m=q;this.onChange(q);if(j.dynamicDraw){this.dynamicDraw(q)}else{this.draw(q)}}else{var p,c;p=c=Math.atan2(h-n,-(i-o-j.width/2))-j.angleOffset;(c<0)&&(p=c+k);q=Math.round(p*(j.max-j.min)/k)+j.min;return(q>j.max)?j.max:q}};this.change=function(c){j.stopper&&(c=Math.max(Math.min(c,j.max),j.min));this.onChange(c);this.draw(c)};this.angle=function(c){return(c-j.min)*k/(j.max-j.min)};this.draw=function(u){var c=this.angle(u),w=1.5*Math.PI+j.angleOffset,x=w,q=w+this.angle(m),s=x+c,v=j.width/2,t=v*j.thickness,p=b.getCgColor(j.cgColor),y;e.clearRect(0,0,j.width,j.width);e.lineWidth=t;if(j.draw(c,m,j,e)){return}for(y=0;y<j.ticks;y++){e.beginPath();if(c>(((2*Math.PI)/j.ticks)*y)&&j.tickColorizeValues){e.strokeStyle=j.fgColor}else{e.strokeStyle=j.tickColor}var z=(((2*Math.PI)/j.ticks)*y)-(0.5*Math.PI);e.arc(v,v,v-t-j.tickLength,z,z+j.tickWidth,false);e.stroke()}j.cursor&&(w=q-0.3)&&(q=q+0.3)&&(x=s-0.3)&&(s=s+0.3);switch(j.skin){case"default":e.beginPath();e.strokeStyle=j.bgColor;e.arc(v,v,v-t/2,0,k,true);e.stroke();if(j.displayPrevious){e.beginPath();e.strokeStyle=(m==u)?j.fgColor:p;e.arc(v,v,v-t/2,w,q,false);e.stroke()}e.beginPath();e.strokeStyle=j.fgColor;e.arc(v,v,v-t/2,x,s,false);e.stroke();break;case"tron":if(j.displayPrevious){e.beginPath();e.strokeStyle=(m==u)?j.fgColor:p;e.arc(v,v,v-t,w,q,false);e.stroke()}e.beginPath();e.strokeStyle=j.fgColor;e.arc(v,v,v-t,x,s,false);e.stroke();e.lineWidth=2;e.beginPath();e.strokeStyle=j.fgColor;e.arc(v,v,v-t+1+t*2/3,0,2*Math.PI,false);e.stroke();break}};var f;var g;this.dynamicDraw=function(p){var c=this;f=j.min;g=setInterval(function(){c.animateDraw(p)},20)};this.animateDraw=function(){if(f>m){clearInterval(g);m=f}else{this.draw(f);this.change(f);f++}};this.capture=function(c){switch(c.type){case"mousemove":case"mousedown":h=c.pageX;i=c.pageY;break;case"touchmove":case"touchstart":h=c.originalEvent.touches[0].pageX;i=c.originalEvent.touches[0].pageY;break}this.change(this.val())};this.cancel=function(){l.val(m);l.onCancel()};this.startDrag=function(q){var r=d.offset(),c=$(document);n=r.left+(j.width/2);o=r.top;this.capture(q);c.bind("mousemove.dial touchmove.dial",function(p){l.capture(p)}).bind("keyup.dial",function(p){if(p.keyCode===27){c.unbind("mouseup.dial mousemove.dial keyup.dial");l.cancel()}}).bind("mouseup.dial touchend.dial",function(p){c.unbind("mousemove.dial touchmove.dial mouseup.dial touchend.dial keyup.dial");l.val(l.val());l.onRelease(m)})}};b.getCgColor=function(c){c=c.substring(1,7);var d=[parseInt(c.substring(0,2),16),parseInt(c.substring(2,4),16),parseInt(c.substring(4,6),16)];return"rgba("+d[0]+","+d[1]+","+d[2]+",.5)"};$.fn.knob=$.fn.dial=function(c){return this.each(function(){var d=$(this),l;if(d.data("dialed")){return d}d.data("dialed",true);l=$.extend({"min":d.data("min")||0,"max":d.data("max")||100,"stopper":true,"readOnly":d.data("readonly"),"cursor":d.data("cursor"),"thickness":d.data("thickness")||0.35,"width":d.data("width")||200,"displayInput":d.data("displayinput")==null||d.data("displayinput"),"displayPrevious":d.data("displayprevious"),"fgColor":d.data("fgcolor")||"#87CEEB","cgColor":d.data("cgcolor")||d.data("fgcolor")||"#87CEEB","bgColor":d.data("bgcolor")||"#EEEEEE","tickColor":d.data("tickColor")||d.data("fgcolor")||"#DDDDDD","ticks":d.data("ticks")||0,"tickLength":d.data("tickLength")||0,"tickWidth":d.data("tickWidth")||0.02,"tickColorizeValues":d.data("tickColorizeValues")||true,"skin":d.data("skin")||"default","angleOffset":a(d.data("angleoffset")),"dynamicDraw":d.data("dynamicdraw")||false,"draw":function(k,s,r,m){},"change":function(k){},"release":function(m,k){}},c);var e=$('<canvas width="'+l.width+'" height="'+l.width+'"></canvas>'),q=$("<div style=width:"+l.width+'px;display:inline;"></div>'),g,p=d.val(),f=function(){l.displayInput&&d.css({"width":l.width/2+"px","position":"absolute","margin-top":(l.width*5/14)+"px","margin-left":"-"+(l.width*3/4)+"px","font-size":(l.width/4)+"px","border":"none","background":"none","font-family":"Arial","font-weight":"bold","text-align":"center","color":l.fgColor,"padding":"0px","-webkit-appearance":"none"})||d.css({"width":"0px","visibility":"hidden"})};d.wrap(q).before(e);f();g=new b(e,l);p||(p=l.min);d.val(p);g.val(p);g.onRelease=function(k){l.release(k,d)};g.onChange=function(k){d.val(k);l.change(k)};d.bind("change",function(k){g.val(d.val())});if(!l.readOnly){e.bind("mousedown touchstart",function(k){k.preventDefault();g.startDrag(k)}).bind("mousewheel DOMMouseScroll",mw=function(r){r.preventDefault();var s=r.originalEvent,k=s.detail||s.wheelDeltaX,m=s.detail||s.wheelDeltaY,t=parseInt(d.val())+(k>0||m>0?1:k<0||m<0?-1:0);g.val(t)});var i,o,n,j=1,h={37:-1,38:1,39:1,40:-1};d.bind("configure",function(m,k){var r;for(r in k){l[r]=k[r]}f();g.val(d.val())}).bind("keydown",function(k){var m=k.keyCode;if(m>=96&&m<=105){m-=48}i=parseInt(String.fromCharCode(m));if(isNaN(i)){(m!==13)&&(m!==8)&&(m!==9)&&(m!==189)&&k.preventDefault();if($.inArray(m,[37,38,39,40])>-1){g.change(parseInt(d.val())+h[m]*j);n=window.setTimeout(function(){j<20&&j++},50);k.preventDefault()}}}).bind("keyup",function(k){if(isNaN(i)){if(n){window.clearTimeout(n);n=null;j=1;g.val(d.val());g.onRelease(d.val(),d)}else{(k.keyCode===13)&&g.onRelease(d.val(),d)}}else{(d.val()>l.max&&d.val(l.max))||(d.val()<l.min&&d.val(l.min))}}).bind("mousewheel DOMMouseScroll",mw)}else{d.attr("readonly","readonly")}}).parent()};function a(c){return $.isNumeric(c)?c*Math.PI/180:0}});