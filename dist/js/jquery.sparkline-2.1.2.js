(function(a,b,c){(function(d){if(typeof define==="function"&&define.amd){define(["jquery"],d)}else{if(jQuery&&!jQuery.fn.sparkline){d(jQuery)}}}(function(d){var H={},q,l,D,k,z,v,w,B,s,f,E,e,o,p,A,u,F,h,t,g,G,n,j,y,i,m,r,L,I,J,K,x,C=0;q=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:false,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:false,enableHighlight:true,highlightLighten:1.4,tooltipSkipNull:true,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:false,numberFormatter:false,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:false,disableInteraction:false},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:c,normalRangeMax:c,normalRangeColor:"#ccc",drawNormalOnTop:false,chartRangeMin:c,chartRangeMax:c,chartRangeMinX:c,chartRangeMaxX:c,tooltipFormat:new D('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:c,nullColor:c,zeroAxis:true,barWidth:4,barSpacing:1,chartRangeMax:c,chartRangeMin:c,chartRangeClip:false,colorMap:c,tooltipFormat:new D('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new D('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss","0":"Draw","1":"Win"}}},discrete:{lineHeight:"auto",thresholdColor:c,thresholdValue:0,chartRangeMax:c,chartRangeMin:c,chartRangeClip:false,tooltipFormat:new D("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:c,tooltipFormat:new D("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new D('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:false,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:true,outlierIQR:1.5,spotRadius:1.5,target:c,targetColor:"#4a2",chartRangeMax:c,chartRangeMin:c,tooltipFormat:new D("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}};m=".jqstooltip { "+"position: absolute;"+"left: 0px;"+"top: 0px;"+"display: block;"+"visibility: hidden;"+"background: rgb(0, 0, 0) transparent;"+"background-color: rgba(0,0,0,0.6);"+"filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);"+'-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";'+"color: white;"+"font: 10px arial, san serif;"+"text-align: left;"+"white-space: nowrap;"+"border: 1px solid white;"+"z-index: 10000;"+"}"+".jqsfield { "+"color: white;"+"padding: 5px 5px 8px 5px;"+"font: 10px arial, san serif;"+"text-align: left;"+"}";l=function(){var N,M;N=function(){this.init.apply(this,arguments)};if(arguments.length>1){if(arguments[0]){N.prototype=d.extend(new arguments[0](),arguments[arguments.length-1]);N._super=arguments[0].prototype}else{N.prototype=arguments[arguments.length-1]}if(arguments.length>2){M=Array.prototype.slice.call(arguments,1,-1);M.unshift(N.prototype);d.extend.apply(d,M)}}else{N.prototype=arguments[0]}N.prototype.cls=N;return N};d.SPFormatClass=D=l({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(N,M){this.format=N;this.fclass=M},render:function(N,Q,S){var U=this,M=N,R,V,P,O,T;return this.format.replace(this.fre,function(){var W;V=arguments[1];P=arguments[3];R=U.precre.exec(V);if(R){T=R[2];V=R[1]}else{T=false}O=M[V];if(O===c){return""}if(P&&Q&&Q[P]){W=Q[P];if(W.get){return Q[P].get(O)||O}else{return Q[P][O]||O}}if(s(O)){if(S.get("numberFormatter")){O=S.get("numberFormatter")(O)}else{O=p(O,T,S.get("numberDigitGroupCount"),S.get("numberDigitGroupSep"),S.get("numberDecimalMark"))}}return O})}});d.spformat=function(N,M){return new D(N,M)};k=function(O,N,M){if(O<N){return N}if(O>M){return M}return O};z=function(N,M){var O;if(M===2){O=b.floor(N.length/2);return N.length%2?N[O]:(N[O-1]+N[O])/2}else{if(N.length%2){O=(N.length*M+M)/4;return O%1?(N[b.floor(O)]+N[b.floor(O)-1])/2:N[O-1]}else{O=(N.length*M+2)/4;return O%1?(N[b.floor(O)]+N[b.floor(O)-1])/2:N[O-1]}}};v=function(N){var M;switch(N){case"undefined":N=c;break;case"null":N=null;break;case"true":N=true;break;case"false":N=false;break;default:M=parseFloat(N);if(N==M){N=M}}return N};w=function(O){var M,N=[];for(M=O.length;M--;){N[M]=v(O[M])}return N};B=function(P,M){var N,Q,O=[];for(N=0,Q=P.length;N<Q;N++){if(P[N]!==M){O.push(P[N])}}return O};s=function(M){return !isNaN(parseFloat(M))&&isFinite(M)};p=function(Q,S,O,N,M){var R,P;Q=(S===false?parseFloat(Q).toString():Q.toFixed(S)).split("");R=(R=d.inArray(".",Q))<0?Q.length:R;if(R<Q.length){Q[R]=M}for(P=R-O;P>0;P-=O){Q.splice(P,0,N)}return Q.join("")};f=function(P,M,O){var N;for(N=M.length;N--;){if(O&&M[N]===null){continue}if(M[N]!==P){return false}}return true};E=function(O){var N=0,M;for(M=O.length;M--;){N+=typeof O[M]==="number"?O[M]:0}return N};o=function(M){return d.isArray(M)?M:[M]};e=function(M){var N;if(a.createStyleSheet){a.createStyleSheet().cssText=M}else{N=a.createElement("style");N.type="text/css";a.getElementsByTagName("head")[0].appendChild(N);N[(typeof a.body.style.WebkitAppearance=="string")?"innerText":"innerHTML"]=M}};d.fn.simpledraw=function(S,N,R,O){var Q,P;if(R&&(Q=this.data("_jqs_vcanvas"))){return Q}if(d.fn.sparkline.canvas===false){return false}else{if(d.fn.sparkline.canvas===c){var M=a.createElement("canvas");if(!!(M.getContext&&M.getContext("2d"))){d.fn.sparkline.canvas=function(W,T,V,U){return new J(W,T,V,U)}}else{if(a.namespaces&&!a.namespaces.v){a.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");d.fn.sparkline.canvas=function(W,T,V,U){return new K(W,T,V)}}else{d.fn.sparkline.canvas=false;return false}}}}if(S===c){S=d(this).innerWidth()}if(N===c){N=d(this).innerHeight()}Q=d.fn.sparkline.canvas(S,N,this,O);P=d(this).data("_jqs_mhandler");if(P){P.registerCanvas(Q)}return Q};d.fn.cleardraw=function(){var M=this.data("_jqs_vcanvas");if(M){M.reset()}};d.RangeMapClass=A=l({init:function(N){var M,O,P=[];for(M in N){if(N.hasOwnProperty(M)&&typeof M==="string"&&M.indexOf(":")>-1){O=M.split(":");O[0]=O[0].length===0?-Infinity:parseFloat(O[0]);O[1]=O[1].length===0?Infinity:parseFloat(O[1]);O[2]=N[M];P.push(O)}}this.map=N;this.rangelist=P||false},get:function(Q){var O=this.rangelist,M,N,P;if((P=this.map[Q])!==c){return P}if(O){for(M=O.length;M--;){N=O[M];if(N[0]<=Q&&N[1]>=Q){return N[2]}}}return c}});d.range_map=function(M){return new A(M)};u=l({init:function(N,O){var M=d(N);this.$el=M;this.options=O;this.currentPageX=0;this.currentPageY=0;this.el=N;this.splist=[];this.tooltip=null;this.over=false;this.displayTooltips=!O.get("disableTooltips");this.highlightEnabled=!O.get("disableHighlight")},registerSparkline:function(M){this.splist.push(M);if(this.over){this.updateDisplay()}},registerCanvas:function(N){var M=d(N.canvas);this.canvas=N;this.$canvas=M;M.mouseenter(d.proxy(this.mouseenter,this));M.mouseleave(d.proxy(this.mouseleave,this));M.click(d.proxy(this.mouseclick,this))},reset:function(M){this.splist=[];if(this.tooltip&&M){this.tooltip.remove();this.tooltip=c}},mouseclick:function(N){var M=d.Event("sparklineClick");M.originalEvent=N;M.sparklines=this.splist;this.$el.trigger(M)},mouseenter:function(M){d(a.body).unbind("mousemove.jqs");d(a.body).bind("mousemove.jqs",d.proxy(this.mousemove,this));this.over=true;this.currentPageX=M.pageX;this.currentPageY=M.pageY;this.currentEl=M.target;if(!this.tooltip&&this.displayTooltips){this.tooltip=new F(this.options);this.tooltip.updatePosition(M.pageX,M.pageY)}this.updateDisplay()},mouseleave:function(){d(a.body).unbind("mousemove.jqs");var Q=this.splist,P=Q.length,N=false,O,M;this.over=false;this.currentEl=null;if(this.tooltip){this.tooltip.remove();this.tooltip=null}for(M=0;M<P;M++){O=Q[M];if(O.clearRegionHighlight()){N=true}}if(N){this.canvas.render()}},mousemove:function(M){this.currentPageX=M.pageX;this.currentPageY=M.pageY;this.currentEl=M.target;if(this.tooltip){this.tooltip.updatePosition(M.pageX,M.pageY)}this.updateDisplay()},updateDisplay:function(){var V=this.splist,U=V.length,Q=false,R=this.$canvas.offset(),O=this.currentPageX-R.left,P=this.currentPageY-R.top,W,T,N,S,M;if(!this.over){return}for(N=0;N<U;N++){T=V[N];S=T.setRegionHighlight(this.currentEl,O,P);if(S){Q=true}}if(Q){M=d.Event("sparklineRegionChange");M.sparklines=this.splist;this.$el.trigger(M);if(this.tooltip){W="";for(N=0;N<U;N++){T=V[N];W+=T.getCurrentRegionTooltip()}this.tooltip.setContent(W)}if(!this.disableHighlight){this.canvas.render()}}if(S===null){this.mouseleave()}}});F=l({sizeStyle:"position: static !important;"+"display: block !important;"+"visibility: hidden !important;"+"float: left !important;",init:function(N){var P=N.get("tooltipClassname","jqstooltip"),O=this.sizeStyle,M;this.container=N.get("tooltipContainer")||a.body;this.tooltipOffsetX=N.get("tooltipOffsetX",10);this.tooltipOffsetY=N.get("tooltipOffsetY",12);d("#jqssizetip").remove();d("#jqstooltip").remove();this.sizetip=d("<div/>",{id:"jqssizetip",style:O,"class":P});this.tooltip=d("<div/>",{id:"jqstooltip","class":P}).appendTo(this.container);M=this.tooltip.offset();this.offsetLeft=M.left;this.offsetTop=M.top;this.hidden=true;d(window).unbind("resize.jqs scroll.jqs");d(window).bind("resize.jqs scroll.jqs",d.proxy(this.updateWindowDims,this));this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=d(window).scrollTop();this.scrollLeft=d(window).scrollLeft();this.scrollRight=this.scrollLeft+d(window).width();this.updatePosition()},getSize:function(M){this.sizetip.html(M).appendTo(this.container);this.width=this.sizetip.width()+1;this.height=this.sizetip.height();this.sizetip.remove()},setContent:function(M){if(!M){this.tooltip.css("visibility","hidden");this.hidden=true;return}this.getSize(M);this.tooltip.html(M).css({"width":this.width,"height":this.height,"visibility":"visible"});if(this.hidden){this.hidden=false;this.updatePosition()}},updatePosition:function(M,N){if(M===c){if(this.mousex===c){return}M=this.mousex-this.offsetLeft;N=this.mousey-this.offsetTop}else{this.mousex=M=M-this.offsetLeft;this.mousey=N=N-this.offsetTop}if(!this.height||!this.width||this.hidden){return}N-=this.height+this.tooltipOffsetY;M+=this.tooltipOffsetX;if(N<this.scrollTop){N=this.scrollTop}if(M<this.scrollLeft){M=this.scrollLeft}else{if(M+this.width>this.scrollRight){M=this.scrollRight-this.width}}this.tooltip.css({"left":M,"top":N})},remove:function(){this.tooltip.remove();this.sizetip.remove();this.sizetip=this.tooltip=c;d(window).unbind("resize.jqs scroll.jqs")}});r=function(){e(m)};d(r);x=[];d.fn.sparkline=function(N,M){return this.each(function(){var Q=new d.fn.sparkline.options(this,M),O=d(this),R,P;R=function(){var X,Y,S,V,T,U,W;if(N==="html"||N===c){W=this.getAttribute(Q.get("tagValuesAttribute"));if(W===c||W===null){W=O.html()}X=W.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")}else{X=N}Y=Q.get("width")==="auto"?X.length*Q.get("defaultPixelsPerValue"):Q.get("width");if(Q.get("height")==="auto"){if(!Q.get("composite")||!d.data(this,"_jqs_vcanvas")){V=a.createElement("span");V.innerHTML="a";O.html(V);S=d(V).innerHeight()||d(V).height();d(V).remove();V=null}}else{S=Q.get("height")}if(!Q.get("disableInteraction")){T=d.data(this,"_jqs_mhandler");if(!T){T=new u(this,Q);d.data(this,"_jqs_mhandler",T)}else{if(!Q.get("composite")){T.reset()}}}else{T=false}if(Q.get("composite")&&!d.data(this,"_jqs_vcanvas")){if(!d.data(this,"_jqs_errnotify")){alert("Attempted to attach a composite sparkline to an element with no existing sparkline");d.data(this,"_jqs_errnotify",true)}return}U=new d.fn.sparkline[Q.get("type")](this,X,Q,Y,S);U.render();if(T){T.registerSparkline(U)}};if((d(this).html()&&!Q.get("disableHiddenCheck")&&d(this).is(":hidden"))||!d(this).parents("body").length){if(!Q.get("composite")&&d.data(this,"_jqs_pending")){for(P=x.length;P;P--){if(x[P-1][0]==this){x.splice(P-1,1)}}}x.push([this,R]);d.data(this,"_jqs_pending",true)}else{R.call(this)}})};d.fn.sparkline.defaults=q();d.sparkline_display_visible=function(){var N,O,P;var M=[];for(O=0,P=x.length;O<P;O++){N=x[O][0];if(d(N).is(":visible")&&!d(N).parents().is(":hidden")){x[O][1].call(N);d.data(x[O][0],"_jqs_pending",false);M.push(O)}else{if(!d(N).closest("html").length&&!d.data(N,"_jqs_pending")){d.data(x[O][0],"_jqs_pending",false);M.push(O)}}}for(O=M.length;O;O--){x.splice(M[O-1],1)}};d.fn.sparkline.options=l({init:function(P,R){var O,N,M,Q;this.userOptions=R=R||{};this.tag=P;this.tagValCache={};N=d.fn.sparkline.defaults;M=N.common;this.tagOptionsPrefix=R.enableTagOptions&&(R.tagOptionsPrefix||M.tagOptionsPrefix);Q=this.getTagSetting("type");if(Q===H){O=N[R.type||M.type]}else{O=N[Q]}this.mergedOptions=d.extend({},M,O,R)},getTagSetting:function(N){var Q=this.tagOptionsPrefix,R,M,P,O;if(Q===false||Q===c){return H}if(this.tagValCache.hasOwnProperty(N)){R=this.tagValCache.key}else{R=this.tag.getAttribute(Q+N);if(R===c||R===null){R=H}else{if(R.substr(0,1)==="["){R=R.substr(1,R.length-2).split(",");for(M=R.length;M--;){R[M]=v(R[M].replace(/(^\s*)|(\s*$)/g,""))}}else{if(R.substr(0,1)==="{"){P=R.substr(1,R.length-2).split(",");R={};for(M=P.length;M--;){O=P[M].split(":",2);R[O[0].replace(/(^\s*)|(\s*$)/g,"")]=v(O[1].replace(/(^\s*)|(\s*$)/g,""))}}else{R=v(R)}}}this.tagValCache.key=R}return R},get:function(N,M){var P=this.getTagSetting(N),O;if(P!==H){return P}return(O=this.mergedOptions[N])===c?M:O}});d.fn.sparkline._base=l({disabled:false,init:function(M,P,O,Q,N){this.el=M;this.$el=d(M);this.values=P;this.options=O;this.width=Q;this.height=N;this.currentRegion=c},initTarget:function(){var M=!this.options.get("disableInteraction");if(!(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),M))){this.disabled=true}else{this.canvasWidth=this.target.pixelWidth;this.canvasHeight=this.target.pixelHeight}},render:function(){if(this.disabled){this.el.innerHTML="";return false}return true},getRegion:function(M,N){},setRegionHighlight:function(N,Q,R){var M=this.currentRegion,O=!this.options.get("disableHighlight"),P;if(Q>this.canvasWidth||R>this.canvasHeight||Q<0||R<0){return null}P=this.getRegion(N,Q,R);if(M!==P){if(M!==c&&O){this.removeHighlight()}this.currentRegion=P;if(P!==c&&O){this.renderHighlight()}return true}return false},clearRegionHighlight:function(){if(this.currentRegion!==c){this.removeHighlight();this.currentRegion=c;return true}return false},renderHighlight:function(){this.changeHighlight(true)},removeHighlight:function(){this.changeHighlight(false)},changeHighlight:function(M){},getCurrentRegionTooltip:function(){var Z=this.options,V="",M=[],P,S,R,N,ac,W,aa,ab,Y,U,T,Q,O,X;if(this.currentRegion===c){return""}P=this.getCurrentRegionFields();T=Z.get("tooltipFormatter");if(T){return T(this,Z,P)}if(Z.get("tooltipChartTitle")){V+='<div class="jqs jqstitle">'+Z.get("tooltipChartTitle")+"</div>\n"}S=this.options.get("tooltipFormat");if(!S){return""}if(!d.isArray(S)){S=[S]}if(!d.isArray(P)){P=[P]}aa=this.options.get("tooltipFormatFieldlist");ab=this.options.get("tooltipFormatFieldlistKey");if(aa&&ab){Y=[];for(W=P.length;W--;){U=P[W][ab];if((X=d.inArray(U,aa))!=-1){Y[X]=P[W]}}P=Y}R=S.length;O=P.length;for(W=0;W<R;W++){Q=S[W];if(typeof Q==="string"){Q=new D(Q)}N=Q.fclass||"jqsfield";for(X=0;X<O;X++){if(!P[X].isNull||!Z.get("tooltipSkipNull")){d.extend(P[X],{prefix:Z.get("tooltipPrefix"),suffix:Z.get("tooltipSuffix")});ac=Q.render(P[X],Z.get("tooltipValueLookups"),Z);M.push('<div class="'+N+'">'+ac+"</div>")}}}if(M.length){return V+M.join("\n")}return""},getCurrentRegionFields:function(){},calcHighlightColor:function(M,R){var N=R.get("highlightColor"),P=R.get("highlightLighten"),S,Q,T,O;if(N){return N}if(P){S=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(M)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(M);if(S){T=[];Q=M.length===4?16:1;for(O=0;O<3;O++){T[O]=k(b.round(parseInt(S[O+1],16)*Q*P),0,255)}return"rgb("+T.join(",")+")"}}return M}});h={changeHighlight:function(N){var M=this.currentRegion,Q=this.target,P=this.regionShapes[M],O;if(P){O=this.renderRegion(M,N);if(d.isArray(O)||d.isArray(P)){Q.replaceWithShapes(P,O);this.regionShapes[M]=d.map(O,function(R){return R.id})}else{Q.replaceWithShape(P,O);this.regionShapes[M]=O.id}}},render:function(){var S=this.values,R=this.target,P=this.regionShapes,Q,N,M,O;if(!this.cls._super.render.call(this)){return}for(M=S.length;M--;){Q=this.renderRegion(M);if(Q){if(d.isArray(Q)){N=[];for(O=Q.length;O--;){Q[O].append();N.push(Q[O].id)}P[M]=N}else{Q.append();P[M]=Q.id}}else{P[M]=null}}R.render()}};d.fn.sparkline.line=t=l(d.fn.sparkline._base,{type:"line",init:function(M,P,O,Q,N){t._super.init.call(this,M,P,O,Q,N);this.vertices=[];this.regionMap=[];this.xvalues=[];this.yvalues=[];this.yminmax=[];this.hightlightSpotId=null;this.lastShapeId=null;this.initTarget()},getRegion:function(M,P,Q){var N,O=this.regionMap;for(N=O.length;N--;){if(O[N]!==null&&P>=O[N][0]&&P<=O[N][1]){return O[N][2]}}return c},getCurrentRegionFields:function(){var M=this.currentRegion;return{isNull:this.yvalues[M]===null,x:this.xvalues[M],y:this.yvalues[M],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:M}},renderHighlight:function(){var M=this.currentRegion,T=this.target,U=this.vertices[M],R=this.options,S=R.get("spotRadius"),Q=R.get("highlightSpotColor"),O=R.get("highlightLineColor"),P,N;if(!U){return}if(S&&Q){P=T.drawCircle(U[0],U[1],S,c,Q);this.highlightSpotId=P.id;T.insertAfterShape(this.lastShapeId,P)}if(O){N=T.drawLine(U[0],this.canvasTop,U[0],this.canvasTop+this.canvasHeight,O);this.highlightLineId=N.id;T.insertAfterShape(this.lastShapeId,N)}},removeHighlight:function(){var M=this.target;if(this.highlightSpotId){M.removeShapeId(this.highlightSpotId);this.highlightSpotId=null}if(this.highlightLineId){M.removeShapeId(this.highlightLineId);this.highlightLineId=null}},scanValues:function(){var S=this.values,R=S.length,T=this.xvalues,V=this.yvalues,U=this.yminmax,M,Q,O,N,P;for(M=0;M<R;M++){Q=S[M];O=typeof(S[M])==="string";N=typeof(S[M])==="object"&&S[M] instanceof Array;P=O&&S[M].split(":");if(O&&P.length===2){T.push(Number(P[0]));V.push(Number(P[1]));U.push(Number(P[1]))}else{if(N){T.push(Q[0]);V.push(Q[1]);U.push(Q[1])}else{T.push(M);if(S[M]===null||S[M]==="null"){V.push(null)}else{V.push(Number(Q));U.push(Number(Q))}}}}if(this.options.get("xvalues")){T=this.options.get("xvalues")}this.maxy=this.maxyorg=b.max.apply(b,U);this.miny=this.minyorg=b.min.apply(b,U);this.maxx=b.max.apply(b,T);this.minx=b.min.apply(b,T);this.xvalues=T;this.yvalues=V;this.yminmax=U},processRangeOptions:function(){var O=this.options,N=O.get("normalRangeMin"),M=O.get("normalRangeMax");if(N!==c){if(N<this.miny){this.miny=N}if(M>this.maxy){this.maxy=M}}if(O.get("chartRangeMin")!==c&&(O.get("chartRangeClip")||O.get("chartRangeMin")<this.miny)){this.miny=O.get("chartRangeMin")}if(O.get("chartRangeMax")!==c&&(O.get("chartRangeClip")||O.get("chartRangeMax")>this.maxy)){this.maxy=O.get("chartRangeMax")}if(O.get("chartRangeMinX")!==c&&(O.get("chartRangeClipX")||O.get("chartRangeMinX")<this.minx)){this.minx=O.get("chartRangeMinX")}if(O.get("chartRangeMaxX")!==c&&(O.get("chartRangeClipX")||O.get("chartRangeMaxX")>this.maxx)){this.maxx=O.get("chartRangeMaxX")}},drawNormalRange:function(N,O,M,P,T){var S=this.options.get("normalRangeMin"),R=this.options.get("normalRangeMax"),U=O+b.round(M-(M*((R-this.miny)/T))),Q=b.round((M*(R-S))/T);this.target.drawRect(N,U,P,Q,c,this.options.get("normalRangeColor")).append()},render:function(){var X=this.options,af=this.target,P=this.canvasWidth,M=this.canvasHeight,ai=this.vertices,ae=X.get("spotRadius"),ad=this.regionMap,ab,ac,aq,O,N,ah,Y,Z,aj,ao,ak,al,am,U,W,ap,V,R,aa,ag,S,Q,an,ar,T;if(!t._super.render.call(this)){return}this.scanValues();this.processRangeOptions();an=this.xvalues;ar=this.yvalues;if(!this.yminmax.length||this.yvalues.length<2){return}O=N=0;ab=this.maxx-this.minx===0?1:this.maxx-this.minx;ac=this.maxy-this.miny===0?1:this.maxy-this.miny;aq=this.yvalues.length-1;if(ae&&(P<(ae*4)||M<(ae*4))){ae=0}if(ae){S=X.get("highlightSpotColor")&&!X.get("disableInteraction");if(S||X.get("minSpotColor")||(X.get("spotColor")&&ar[aq]===this.miny)){M-=b.ceil(ae)}if(S||X.get("maxSpotColor")||(X.get("spotColor")&&ar[aq]===this.maxy)){M-=b.ceil(ae);O+=b.ceil(ae)}if(S||((X.get("minSpotColor")||X.get("maxSpotColor"))&&(ar[0]===this.miny||ar[0]===this.maxy))){N+=b.ceil(ae);P-=b.ceil(ae)}if(S||X.get("spotColor")||(X.get("minSpotColor")||X.get("maxSpotColor")&&(ar[aq]===this.miny||ar[aq]===this.maxy))){P-=b.ceil(ae)}}M--;if(X.get("normalRangeMin")!==c&&!X.get("drawNormalOnTop")){this.drawNormalRange(N,O,M,P,ac)}Y=[];Z=[Y];U=W=null;ap=ar.length;for(T=0;T<ap;T++){aj=an[T];ak=an[T+1];ao=ar[T];al=N+b.round((aj-this.minx)*(P/ab));am=T<ap-1?N+b.round((ak-this.minx)*(P/ab)):P;W=al+((am-al)/2);ad[T]=[U||0,W,T];U=W;if(ao===null){if(T){if(ar[T-1]!==null){Y=[];Z.push(Y)}ai.push(null)}}else{if(ao<this.miny){ao=this.miny}if(ao>this.maxy){ao=this.maxy}if(!Y.length){Y.push([al,O+M])}ah=[al,O+b.round(M-(M*((ao-this.miny)/ac)))];Y.push(ah);ai.push(ah)}}V=[];R=[];aa=Z.length;for(T=0;T<aa;T++){Y=Z[T];if(Y.length){if(X.get("fillColor")){Y.push([Y[Y.length-1][0],(O+M)]);R.push(Y.slice(0));Y.pop()}if(Y.length>2){Y[0]=[Y[0][0],Y[1][1]]}V.push(Y)}}aa=R.length;for(T=0;T<aa;T++){af.drawShape(R[T],X.get("fillColor"),X.get("fillColor")).append()}if(X.get("normalRangeMin")!==c&&X.get("drawNormalOnTop")){this.drawNormalRange(N,O,M,P,ac)}aa=V.length;for(T=0;T<aa;T++){af.drawShape(V[T],X.get("lineColor"),c,X.get("lineWidth")).append()}if(ae&&X.get("valueSpots")){ag=X.get("valueSpots");if(ag.get===c){ag=new A(ag)}for(T=0;T<ap;T++){Q=ag.get(ar[T]);if(Q){af.drawCircle(N+b.round((an[T]-this.minx)*(P/ab)),O+b.round(M-(M*((ar[T]-this.miny)/ac))),ae,c,Q).append()}}}if(ae&&X.get("spotColor")&&ar[aq]!==null){af.drawCircle(N+b.round((an[an.length-1]-this.minx)*(P/ab)),O+b.round(M-(M*((ar[aq]-this.miny)/ac))),ae,c,X.get("spotColor")).append()}if(this.maxy!==this.minyorg){if(ae&&X.get("minSpotColor")){aj=an[d.inArray(this.minyorg,ar)];af.drawCircle(N+b.round((aj-this.minx)*(P/ab)),O+b.round(M-(M*((this.minyorg-this.miny)/ac))),ae,c,X.get("minSpotColor")).append()}if(ae&&X.get("maxSpotColor")){aj=an[d.inArray(this.maxyorg,ar)];af.drawCircle(N+b.round((aj-this.minx)*(P/ab)),O+b.round(M-(M*((this.maxyorg-this.miny)/ac))),ae,c,X.get("maxSpotColor")).append()}}this.lastShapeId=af.getLastShapeId();this.canvasTop=O;af.render()}});d.fn.sparkline.bar=g=l(d.fn.sparkline._base,h,{type:"bar",init:function(U,ap,ae,at,X){var N=parseInt(ae.get("barWidth"),10),M=parseInt(ae.get("barSpacing"),10),R=ae.get("chartRangeMin"),Q=ae.get("chartRangeMax"),P=ae.get("chartRangeClip"),aj=Infinity,ai=-Infinity,Z,W,V,ak,ad,Y,aq,af,ax,au,ac,ab,T,S,ah,ar,aa,ag,an,ao,aw,av,O;g._super.init.call(this,U,ap,ae,at,X);for(Y=0,aq=ap.length;Y<aq;Y++){ao=ap[Y];Z=typeof(ao)==="string"&&ao.indexOf(":")>-1;if(Z||d.isArray(ao)){ah=true;if(Z){ao=ap[Y]=w(ao.split(":"))}ao=B(ao,null);W=b.min.apply(b,ao);V=b.max.apply(b,ao);if(W<aj){aj=W}if(V>ai){ai=V}}}this.stacked=ah;this.regionShapes={};this.barWidth=N;this.barSpacing=M;this.totalBarWidth=N+M;this.width=at=(ap.length*N)+((ap.length-1)*M);this.initTarget();if(P){T=R===c?-Infinity:R;S=Q===c?Infinity:Q}ad=[];ak=ah?[]:ad;var am=[];var al=[];for(Y=0,aq=ap.length;Y<aq;Y++){if(ah){ar=ap[Y];ap[Y]=an=[];am[Y]=0;ak[Y]=al[Y]=0;for(aa=0,ag=ar.length;aa<ag;aa++){ao=an[aa]=P?k(ar[aa],T,S):ar[aa];if(ao!==null){if(ao>0){am[Y]+=ao}if(aj<0&&ai>0){if(ao<0){al[Y]+=b.abs(ao)}else{ak[Y]+=ao}}else{ak[Y]+=b.abs(ao-(ao<0?ai:aj))}ad.push(ao)}}}else{ao=P?k(ap[Y],T,S):ap[Y];ao=ap[Y]=v(ao);if(ao!==null){ad.push(ao)}}}this.max=ab=b.max.apply(b,ad);this.min=ac=b.min.apply(b,ad);this.stackMax=ai=ah?b.max.apply(b,am):ab;this.stackMin=aj=ah?b.min.apply(b,ad):ac;if(ae.get("chartRangeMin")!==c&&(ae.get("chartRangeClip")||ae.get("chartRangeMin")<ac)){ac=ae.get("chartRangeMin")}if(ae.get("chartRangeMax")!==c&&(ae.get("chartRangeClip")||ae.get("chartRangeMax")>ab)){ab=ae.get("chartRangeMax")}this.zeroAxis=ax=ae.get("zeroAxis",true);if(ac<=0&&ab>=0&&ax){au=0}else{if(ax==false){au=ac}else{if(ac>0){au=ac}else{au=ab}}}this.xaxisOffset=au;af=ah?(b.max.apply(b,ak)+b.max.apply(b,al)):ab-ac;this.canvasHeightEf=(ax&&ac<0)?this.canvasHeight-2:this.canvasHeight-1;if(ac<au){av=(ah&&ab>=0)?ai:ab;aw=(av-au)/af*this.canvasHeight;if(aw!==b.ceil(aw)){this.canvasHeightEf-=2;aw=b.ceil(aw)}}else{aw=this.canvasHeight}this.yoffset=aw;if(d.isArray(ae.get("colorMap"))){this.colorMapByIndex=ae.get("colorMap");this.colorMapByValue=null}else{this.colorMapByIndex=null;this.colorMapByValue=ae.get("colorMap");if(this.colorMapByValue&&this.colorMapByValue.get===c){this.colorMapByValue=new A(this.colorMapByValue)}}this.range=af},getRegion:function(M,O,P){var N=b.floor(O/this.totalBarWidth);return(N<0||N>=this.values.length)?c:N},getCurrentRegionFields:function(){var M=this.currentRegion,Q=o(this.values[M]),O=[],P,N;for(N=Q.length;N--;){P=Q[N];O.push({isNull:P===null,value:P,color:this.calcColor(N,P,M),offset:M})}return O},calcColor:function(R,S,T){var N=this.colorMapByIndex,O=this.colorMapByValue,Q=this.options,M,P;if(this.stacked){M=Q.get("stackedBarColor")}else{M=(S<0)?Q.get("negBarColor"):Q.get("barColor")}if(S===0&&Q.get("zeroColor")!==c){M=Q.get("zeroColor")}if(O&&(P=O.get(S))){M=P}else{if(N&&N.length>T){M=N[T]}}return d.isArray(M)?M[R%M.length]:M},renderRegion:function(ac,Q){var ab=this.values[ac],U=this.options,ae=this.xaxisOffset,W=[],V=this.range,X=this.stacked,Y=this.target,ad=ac*this.totalBarWidth,N=this.canvasHeightEf,ag=this.yoffset,af,P,O,S,ah,R,aa,Z,T,M;ab=d.isArray(ab)?ab:[ab];aa=ab.length;Z=ab[0];S=f(null,ab);M=f(ae,ab,true);if(S){if(U.get("nullColor")){O=Q?U.get("nullColor"):this.calcHighlightColor(U.get("nullColor"),U);af=(ag>0)?ag-1:ag;return Y.drawRect(ad,af,this.barWidth-1,0,O,O)}else{return c}}ah=ag;for(R=0;R<aa;R++){Z=ab[R];if(X&&Z===ae){if(!M||T){continue}T=true}if(V>0){P=b.floor(N*((b.abs(Z-ae)/V)))+1}else{P=1}if(Z<ae||(Z===ae&&ag===0)){af=ah;ah+=P}else{af=ag-P;ag-=P}O=this.calcColor(R,Z,ac);if(Q){O=this.calcHighlightColor(O,U)}W.push(Y.drawRect(ad,af,this.barWidth-1,P-1,O,O))}if(W.length===1){return W[0]}return W}});d.fn.sparkline.tristate=G=l(d.fn.sparkline._base,h,{type:"tristate",init:function(O,R,Q,S,P){var N=parseInt(Q.get("barWidth"),10),M=parseInt(Q.get("barSpacing"),10);G._super.init.call(this,O,R,Q,S,P);this.regionShapes={};this.barWidth=N;this.barSpacing=M;this.totalBarWidth=N+M;this.values=d.map(R,Number);this.width=S=(R.length*N)+((R.length-1)*M);if(d.isArray(Q.get("colorMap"))){this.colorMapByIndex=Q.get("colorMap");this.colorMapByValue=null}else{this.colorMapByIndex=null;this.colorMapByValue=Q.get("colorMap");if(this.colorMapByValue&&this.colorMapByValue.get===c){this.colorMapByValue=new A(this.colorMapByValue)}}this.initTarget()},getRegion:function(M,N,O){return b.floor(N/this.totalBarWidth)},getCurrentRegionFields:function(){var M=this.currentRegion;return{isNull:this.values[M]===c,value:this.values[M],color:this.calcColor(this.values[M],M),offset:M}},calcColor:function(R,S){var T=this.values,Q=this.options,N=this.colorMapByIndex,O=this.colorMapByValue,M,P;if(O&&(P=O.get(R))){M=P}else{if(N&&N.length>S){M=N[S]}else{if(T[S]<0){M=Q.get("negBarColor")}else{if(T[S]>0){M=Q.get("posBarColor")}else{M=Q.get("zeroBarColor")}}}}return M},renderRegion:function(T,Q){var U=this.values,R=this.options,S=this.target,M,P,O,V,W,N;M=S.pixelHeight;O=b.round(M/2);V=T*this.totalBarWidth;if(U[T]<0){W=O;P=O-1}else{if(U[T]>0){W=0;P=O-1}else{W=O-1;P=2}}N=this.calcColor(U[T],T);if(N===null){return}if(Q){N=this.calcHighlightColor(N,R)}return S.drawRect(V,W,this.barWidth-1,P-1,N,N)}});d.fn.sparkline.discrete=n=l(d.fn.sparkline._base,h,{type:"discrete",init:function(M,P,O,Q,N){n._super.init.call(this,M,P,O,Q,N);this.regionShapes={};this.values=P=d.map(P,Number);this.min=b.min.apply(b,P);this.max=b.max.apply(b,P);this.range=this.max-this.min;this.width=Q=O.get("width")==="auto"?P.length*2:this.width;this.interval=b.floor(Q/P.length);this.itemWidth=Q/P.length;if(O.get("chartRangeMin")!==c&&(O.get("chartRangeClip")||O.get("chartRangeMin")<this.min)){this.min=O.get("chartRangeMin")}if(O.get("chartRangeMax")!==c&&(O.get("chartRangeClip")||O.get("chartRangeMax")>this.max)){this.max=O.get("chartRangeMax")}this.initTarget();if(this.target){this.lineHeight=O.get("lineHeight")==="auto"?b.round(this.canvasHeight*0.3):O.get("lineHeight")}},getRegion:function(M,N,O){return b.floor(N/this.itemWidth)},getCurrentRegionFields:function(){var M=this.currentRegion;return{isNull:this.values[M]===c,value:this.values[M],offset:M}},renderRegion:function(Y,O){var Z=this.values,T=this.options,S=this.min,R=this.max,V=this.range,P=this.interval,W=this.target,M=this.canvasHeight,Q=this.lineHeight,U=M-Q,ab,X,N,aa;X=k(Z[Y],S,R);aa=Y*P;ab=b.round(U-U*((X-S)/V));N=(T.get("thresholdColor")&&X<T.get("thresholdValue"))?T.get("thresholdColor"):T.get("lineColor");if(O){N=this.calcHighlightColor(N,T)}return W.drawLine(aa,ab,aa,ab+Q,N)}});d.fn.sparkline.bullet=j=l(d.fn.sparkline._base,{type:"bullet",init:function(M,S,Q,T,N){var P,O,R;j._super.init.call(this,M,S,Q,T,N);this.values=S=w(S);R=S.slice();R[0]=R[0]===null?R[2]:R[0];R[1]=S[1]===null?R[2]:R[1];P=b.min.apply(b,S);O=b.max.apply(b,S);if(Q.get("base")===c){P=P<0?P:0}else{P=Q.get("base")}this.min=P;this.max=O;this.range=O-P;this.shapes={};this.valueShapes={};this.regiondata={};this.width=T=Q.get("width")==="auto"?"4.0em":T;this.target=this.$el.simpledraw(T,N,Q.get("composite"));if(!S.length){this.disabled=true}this.initTarget()},getRegion:function(M,O,P){var N=this.target.getShapeAt(M,O,P);return(N!==c&&this.shapes[N]!==c)?this.shapes[N]:c},getCurrentRegionFields:function(){var M=this.currentRegion;return{fieldkey:M.substr(0,1),value:this.values[M.substr(1)],region:M}},changeHighlight:function(N){var M=this.currentRegion,P=this.valueShapes[M],O;delete this.shapes[P];switch(M.substr(0,1)){case"r":O=this.renderRange(M.substr(1),N);break;case"p":O=this.renderPerformance(N);break;case"t":O=this.renderTarget(N);break}this.valueShapes[M]=O.id;this.shapes[O.id]=M;this.target.replaceWithShape(P,O)},renderRange:function(Q,N){var O=this.values[Q],P=b.round(this.canvasWidth*((O-this.min)/this.range)),M=this.options.get("rangeColors")[Q-2];if(N){M=this.calcHighlightColor(M,this.options)}return this.target.drawRect(0,0,P-1,this.canvasHeight-1,M,M)},renderPerformance:function(N){var O=this.values[1],P=b.round(this.canvasWidth*((O-this.min)/this.range)),M=this.options.get("performanceColor");if(N){M=this.calcHighlightColor(M,this.options)}return this.target.drawRect(0,b.round(this.canvasHeight*0.3),P-1,b.round(this.canvasHeight*0.4)-1,M,M)},renderTarget:function(N){var Q=this.values[0],R=b.round(this.canvasWidth*((Q-this.min)/this.range)-(this.options.get("targetWidth")/2)),P=b.round(this.canvasHeight*0.1),O=this.canvasHeight-(P*2),M=this.options.get("targetColor");if(N){M=this.calcHighlightColor(M,this.options)}return this.target.drawRect(R,P,this.options.get("targetWidth")-1,O-1,M,M)},render:function(){var P=this.values.length,O=this.target,M,N;if(!j._super.render.call(this)){return}for(M=2;M<P;M++){N=this.renderRange(M).append();this.shapes[N.id]="r"+M;this.valueShapes["r"+M]=N.id}if(this.values[1]!==null){N=this.renderPerformance().append();this.shapes[N.id]="p1";this.valueShapes.p1=N.id}if(this.values[0]!==null){N=this.renderTarget().append();this.shapes[N.id]="t0";this.valueShapes.t0=N.id}O.render()}});d.fn.sparkline.pie=y=l(d.fn.sparkline._base,{type:"pie",init:function(M,R,P,S,N){var Q=0,O;y._super.init.call(this,M,R,P,S,N);this.shapes={};this.valueShapes={};this.values=R=d.map(R,Number);if(P.get("width")==="auto"){this.width=this.height}if(R.length>0){for(O=R.length;O--;){Q+=R[O]}}this.total=Q;this.initTarget();this.radius=b.floor(b.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(M,O,P){var N=this.target.getShapeAt(M,O,P);return(N!==c&&this.shapes[N]!==c)?this.shapes[N]:c},getCurrentRegionFields:function(){var M=this.currentRegion;return{isNull:this.values[M]===c,value:this.values[M],percent:this.values[M]/this.total*100,color:this.options.get("sliceColors")[M%this.options.get("sliceColors").length],offset:M}},changeHighlight:function(N){var M=this.currentRegion,O=this.renderSlice(M,N),P=this.valueShapes[M];delete this.shapes[P];this.target.replaceWithShape(P,O);this.valueShapes[M]=O.id;this.shapes[O.id]=M},renderSlice:function(Z,Q){var X=this.target,U=this.options,V=this.radius,M=U.get("borderWidth"),T=U.get("offset"),N=2*b.PI,aa=this.values,Y=this.total,S=T?(2*b.PI)*(T/360):0,W,P,R,ab,O;ab=aa.length;for(R=0;R<ab;R++){W=S;P=S;if(Y>0){P=S+(N*(aa[R]/Y))}if(Z===R){O=U.get("sliceColors")[R%U.get("sliceColors").length];if(Q){O=this.calcHighlightColor(O,U)}return X.drawPieSlice(V,V,V-M,W,P,c,O)}S=P}},render:function(){var R=this.target,S=this.values,O=this.options,P=this.radius,M=O.get("borderWidth"),Q,N;if(!y._super.render.call(this)){return}if(M){R.drawCircle(P,P,b.floor(P-(M/2)),O.get("borderColor"),c,M).append()}for(N=S.length;N--;){if(S[N]){Q=this.renderSlice(N).append();this.valueShapes[N]=Q.id;this.shapes[Q.id]=N}}R.render()}});d.fn.sparkline.box=i=l(d.fn.sparkline._base,{type:"box",init:function(M,P,O,Q,N){i._super.init.call(this,M,P,O,Q,N);this.values=d.map(P,Number);this.width=O.get("width")==="auto"?"4.0em":Q;this.initTarget();if(!this.values.length){this.disabled=1}},getRegion:function(){return 1},getCurrentRegionFields:function(){var M=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];if(this.loutlier!==c){M.push({field:"lo",value:this.loutlier})}if(this.routlier!==c){M.push({field:"ro",value:this.routlier})}if(this.lwhisker!==c){M.push({field:"lw",value:this.lwhisker})}if(this.rwhisker!==c){M.push({field:"rw",value:this.rwhisker})}return M},render:function(){var ac=this.target,ae=this.values,af=ae.length,V=this.options,O=this.canvasWidth,M=this.canvasHeight,U=V.get("chartRangeMin")===c?b.min.apply(b,ae):V.get("chartRangeMin"),T=V.get("chartRangeMax")===c?b.max.apply(b,ae):V.get("chartRangeMax"),N=0,S,R,Q,W,X,Y,aa,Z,P,ab,ad;if(!i._super.render.call(this)){return}if(V.get("raw")){if(V.get("showOutliers")&&ae.length>5){R=ae[0];S=ae[1];W=ae[2];X=ae[3];Y=ae[4];aa=ae[5];Z=ae[6]}else{S=ae[0];W=ae[1];X=ae[2];Y=ae[3];aa=ae[4]}}else{ae.sort(function(ag,ah){return ag-ah});W=z(ae,1);X=z(ae,2);Y=z(ae,3);Q=Y-W;if(V.get("showOutliers")){S=aa=c;for(P=0;P<af;P++){if(S===c&&ae[P]>W-(Q*V.get("outlierIQR"))){S=ae[P]}if(ae[P]<Y+(Q*V.get("outlierIQR"))){aa=ae[P]}}R=ae[0];Z=ae[af-1]}else{S=ae[0];aa=ae[af-1]}}this.quartiles=[W,X,Y];this.lwhisker=S;this.rwhisker=aa;this.loutlier=R;this.routlier=Z;ad=O/(T-U+1);if(V.get("showOutliers")){N=b.ceil(V.get("spotRadius"));O-=2*b.ceil(V.get("spotRadius"));ad=O/(T-U+1);if(R<S){ac.drawCircle((R-U)*ad+N,M/2,V.get("spotRadius"),V.get("outlierLineColor"),V.get("outlierFillColor")).append()}if(Z>aa){ac.drawCircle((Z-U)*ad+N,M/2,V.get("spotRadius"),V.get("outlierLineColor"),V.get("outlierFillColor")).append()}}ac.drawRect(b.round((W-U)*ad+N),b.round(M*0.1),b.round((Y-W)*ad),b.round(M*0.8),V.get("boxLineColor"),V.get("boxFillColor")).append();ac.drawLine(b.round((S-U)*ad+N),b.round(M/2),b.round((W-U)*ad+N),b.round(M/2),V.get("lineColor")).append();ac.drawLine(b.round((S-U)*ad+N),b.round(M/4),b.round((S-U)*ad+N),b.round(M-M/4),V.get("whiskerColor")).append();ac.drawLine(b.round((aa-U)*ad+N),b.round(M/2),b.round((Y-U)*ad+N),b.round(M/2),V.get("lineColor")).append();ac.drawLine(b.round((aa-U)*ad+N),b.round(M/4),b.round((aa-U)*ad+N),b.round(M-M/4),V.get("whiskerColor")).append();ac.drawLine(b.round((X-U)*ad+N),b.round(M*0.1),b.round((X-U)*ad+N),b.round(M*0.9),V.get("medianColor")).append();if(V.get("target")){ab=b.ceil(V.get("spotRadius"));ac.drawLine(b.round((V.get("target")-U)*ad+N),b.round((M/2)-ab),b.round((V.get("target")-U)*ad+N),b.round((M/2)+ab),V.get("targetColor")).append();ac.drawLine(b.round((V.get("target")-U)*ad+N-ab),b.round(M/2),b.round((V.get("target")-U)*ad+N+ab),b.round(M/2),V.get("targetColor")).append()}ac.render()}});L=l({init:function(O,N,P,M){this.target=O;this.id=N;this.type=P;this.args=M},append:function(){this.target.appendShape(this);return this}});I=l({_pxregex:/(\d+)(px)?\s*$/i,init:function(O,M,N){if(!O){return}this.width=O;this.height=M;this.target=N;this.lastShapeId=null;if(N[0]){N=N[0]}d.data(N,"_jqs_vcanvas",this)},drawLine:function(O,Q,P,R,M,N){return this.drawShape([[O,Q],[P,R]],M,N)},drawShape:function(P,N,M,O){return this._genShape("Shape",[P,N,M,O])},drawCircle:function(Q,R,P,N,M,O){return this._genShape("Circle",[Q,R,P,N,M,O])},drawPieSlice:function(R,S,P,Q,M,O,N){return this._genShape("PieSlice",[R,S,P,Q,M,O,N])},drawRect:function(Q,R,P,N,O,M){return this._genShape("Rect",[Q,R,P,N,O,M])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(M,N){d(N).html(M)},_calculatePixelDims:function(P,N,M){var O;O=this._pxregex.exec(N);if(O){this.pixelHeight=O[1]}else{this.pixelHeight=d(M).height()}O=this._pxregex.exec(P);if(O){this.pixelWidth=O[1]}else{this.pixelWidth=d(M).width()}},_genShape:function(O,N){var M=C++;N.unshift(M);return new L(this,M,O,N)},appendShape:function(M){alert("appendShape not implemented")},replaceWithShape:function(N,M){alert("replaceWithShape not implemented")},insertAfterShape:function(N,M){alert("insertAfterShape not implemented")},removeShapeId:function(M){alert("removeShapeId not implemented")},getShapeAt:function(M,N,O){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}});J=l(I,{init:function(P,M,O,N){J._super.init.call(this,P,M,O);this.canvas=a.createElement("canvas");if(O[0]){O=O[0]}d.data(O,"_jqs_vcanvas",this);d(this.canvas).css({display:"inline-block",width:P,height:M,verticalAlign:"top"});this._insert(this.canvas,O);this._calculatePixelDims(P,M,this.canvas);this.canvas.width=this.pixelWidth;this.canvas.height=this.pixelHeight;this.interact=N;this.shapes={};this.shapeseq=[];this.currentTargetShapeId=c;d(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(O,N,P){var M=this.canvas.getContext("2d");if(O!==c){M.strokeStyle=O}M.lineWidth=P===c?1:P;if(N!==c){M.fillStyle=N}return M},reset:function(){var M=this._getContext();M.clearRect(0,0,this.pixelWidth,this.pixelHeight);this.shapes={};this.shapeseq=[];this.currentTargetShapeId=c},_drawShape:function(T,R,P,N,Q){var M=this._getContext(P,N,Q),O,S;M.beginPath();M.moveTo(R[0][0]+0.5,R[0][1]+0.5);for(O=1,S=R.length;O<S;O++){M.lineTo(R[O][0]+0.5,R[O][1]+0.5)}if(P!==c){M.stroke()}if(N!==c){M.fill()}if(this.targetX!==c&&this.targetY!==c&&M.isPointInPath(this.targetX,this.targetY)){this.currentTargetShapeId=T}},_drawCircle:function(R,S,T,Q,O,N,P){var M=this._getContext(O,N,P);M.beginPath();M.arc(S,T,Q,0,2*b.PI,false);if(this.targetX!==c&&this.targetY!==c&&M.isPointInPath(this.targetX,this.targetY)){this.currentTargetShapeId=R}if(O!==c){M.stroke()}if(N!==c){M.fill()}},_drawPieSlice:function(R,T,U,Q,S,N,P,O){var M=this._getContext(P,O);M.beginPath();M.moveTo(T,U);M.arc(T,U,Q,S,N,false);M.lineTo(T,U);M.closePath();if(P!==c){M.stroke()}if(O){M.fill()}if(this.targetX!==c&&this.targetY!==c&&M.isPointInPath(this.targetX,this.targetY)){this.currentTargetShapeId=R}},_drawRect:function(P,R,S,Q,N,O,M){return this._drawShape(P,[[R,S],[R+Q,S],[R+Q,S+N],[R,S+N],[R,S]],O,M)},appendShape:function(M){this.shapes[M.id]=M;this.shapeseq.push(M.id);this.lastShapeId=M.id;return M.id},replaceWithShape:function(O,N){var P=this.shapeseq,M;this.shapes[N.id]=N;for(M=P.length;M--;){if(P[M]==O){P[M]=N.id}}delete this.shapes[O]},replaceWithShapes:function(O,Q){var R=this.shapeseq,P={},S,N,M;for(N=O.length;N--;){P[O[N]]=true}for(N=R.length;N--;){S=R[N];if(P[S]){R.splice(N,1);delete this.shapes[S];M=N}}for(N=Q.length;N--;){R.splice(M,0,Q[N].id);this.shapes[Q[N].id]=Q[N]}},insertAfterShape:function(O,N){var P=this.shapeseq,M;for(M=P.length;M--;){if(P[M]===O){P.splice(M+1,0,N.id);this.shapes[N.id]=N;return}}},removeShapeId:function(N){var O=this.shapeseq,M;for(M=O.length;M--;){if(O[M]===N){O.splice(M,1);break}}delete this.shapes[N]},getShapeAt:function(M,N,O){this.targetX=N;this.targetY=O;this.render();return this.currentTargetShapeId},render:function(){var S=this.shapeseq,R=this.shapes,P=S.length,M=this._getContext(),Q,O,N;M.clearRect(0,0,this.pixelWidth,this.pixelHeight);for(N=0;N<P;N++){Q=S[N];O=R[Q];this["_draw"+O.type].apply(this,O.args)}if(!this.interact){this.shapes={};this.shapeseq=[]}}});K=l(I,{init:function(P,N,O){var M;K._super.init.call(this,P,N,O);if(O[0]){O=O[0]}d.data(O,"_jqs_vcanvas",this);this.canvas=a.createElement("span");d(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:P,height:N,margin:"0px",padding:"0px",verticalAlign:"top"});this._insert(this.canvas,O);this._calculatePixelDims(P,N,this.canvas);this.canvas.width=this.pixelWidth;this.canvas.height=this.pixelHeight;M='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"'+' style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>';this.canvas.insertAdjacentHTML("beforeEnd",M);this.group=d(this.canvas).children()[0];this.rendered=false;this.prerender=""},_drawShape:function(V,T,R,O,S){var Y=[],Q,W,N,M,X,U,P;for(P=0,U=T.length;P<U;P++){Y[P]=""+(T[P][0])+","+(T[P][1])}Q=Y.splice(0,1);S=S===c?1:S;W=R===c?' stroked="false" ':' strokeWeight="'+S+'px" strokeColor="'+R+'" ';N=O===c?' filled="false"':' fillColor="'+O+'" filled="true" ';M=Y[0]===Y[Y.length-1]?"x ":"";X='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+V+'" '+W+N+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+Q+" l "+Y.join(", ")+" "+M+'e">'+" </v:shape>";return X},_drawCircle:function(R,U,V,Q,O,N,P){var S,M,T;U-=Q;V-=Q;S=O===c?' stroked="false" ':' strokeWeight="'+P+'px" strokeColor="'+O+'" ';M=N===c?' filled="false"':' fillColor="'+N+'" filled="true" ';T="<v:oval "+' id="jqsshape'+R+'" '+S+M+' style="position:absolute;top:'+V+"px; left:"+U+"px; width:"+(Q*2)+"px; height:"+(Q*2)+'px"></v:oval>';return T},_drawPieSlice:function(T,aa,ab,S,U,M,R,Q){var Z,V,W,N,O,X,P,Y;if(U===M){return""}if((M-U)===(2*b.PI)){U=0;M=(2*b.PI)}V=aa+b.round(b.cos(U)*S);W=ab+b.round(b.sin(U)*S);N=aa+b.round(b.cos(M)*S);O=ab+b.round(b.sin(M)*S);if(V===N&&W===O){if((M-U)<b.PI){return""}V=N=aa+S;W=O=ab}if(V===N&&W===O&&(M-U)<b.PI){return""}Z=[aa-S,ab-S,aa+S,ab+S,V,W,N,O];X=R===c?' stroked="false" ':' strokeWeight="1px" strokeColor="'+R+'" ';P=Q===c?' filled="false"':' fillColor="'+Q+'" filled="true" ';Y='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+T+'" '+X+P+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+aa+","+ab+" wa "+Z.join(", ")+' x e">'+" </v:shape>";return Y},_drawRect:function(P,R,S,Q,N,O,M){return this._drawShape(P,[[R,S],[R,S+N],[R+Q,S+N],[R+Q,S],[R,S]],O,M)},reset:function(){this.group.innerHTML=""},appendShape:function(M){var N=this["_draw"+M.type].apply(this,M.args);if(this.rendered){this.group.insertAdjacentHTML("beforeEnd",N)}else{this.prerender+=N}this.lastShapeId=M.id;return M.id},replaceWithShape:function(O,N){var M=d("#jqsshape"+O),P=this["_draw"+N.type].apply(this,N.args);M[0].outerHTML=P},replaceWithShapes:function(P,Q){var M=d("#jqsshape"+P[0]),O="",R=Q.length,N;for(N=0;N<R;N++){O+=this["_draw"+Q[N].type].apply(this,Q[N].args)}M[0].outerHTML=O;for(N=1;N<P.length;N++){d("#jqsshape"+P[N]).remove()}},insertAfterShape:function(O,N){var M=d("#jqsshape"+O),P=this["_draw"+N.type].apply(this,N.args);M[0].insertAdjacentHTML("afterEnd",P)},removeShapeId:function(N){var M=d("#jqsshape"+N);this.group.removeChild(M[0])},getShapeAt:function(M,O,P){var N=M.id.substr(8);return N},render:function(){if(!this.rendered){this.group.innerHTML=this.prerender;this.rendered=true}}})}))}(document,Math));