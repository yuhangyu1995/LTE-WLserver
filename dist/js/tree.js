function HTREE(a,b){var c={};c.myname="";c.position="";c.tree_html="";c.root="";c.rootID="1";c.selected="";c.first_level="";c.enhance_on_off=function(g){if(g.children.length>0){return}if(c.first_level!=""){var e=c.first_level+" > table td[name='node']";var h=$(e)}if(g.nodeId.split(".").length==2){return}var f=g.nodeId.split(".");var d=f[0]+"_"+f[1];c.first_level="#"+c.myname+"_"+d;var e="#"+c.myname+"_"+d+" > table td[name='node']";var h=$(e)};c.enhance_show=function(){if(c.selected.split(".").length==2){return}var d="#"+c.myname+"_"+c.selected.replace(/\./,"_");if(d.indexOf(c.first_level)!=0||c.first_level==d){return}if(c.first_level!=""){var e=c.first_level+" > table td[name='node']";var f=$(e)}};c.enhance_clean=function(){c.first_level=""};c.node_struct=function(){var d={};d.nodeId="xxx";d.type="xxx";d.status="xxx";d.link="xxx";d.action="xxx";d.children=[];d.image="";d.additional="";d.values="";d.parent="";return d};c.getCurrentNode=function(){var d=c.node_struct(),e;if(c.selected.toString().length>0){e=c.FIND_NODE(c.selected,c.root);if(e!==-1){d.nodeId=e.nodeId;d.type=e.type;d.status=e.status;d.link=e.link;d.action=e.action;d.children=[];d.image=e.image;d.additional=e.additional;d.values=e.values;d.parent=""}}return d};c.CLEAN_SELECTED=function(){c.selected="";c.enhance_clean();c.SHOW()};c.OPEN_FST_LEVEL=function(){var f=[];f.push(c.root);var e=0,d=f.pop();for(e=0;e<d.children.length;e++){d.children[e].status=1}};c.FIND_NODE=function(k,h){k=k.toString();var e=k.split(".");var d=h.nodeId.split(".");if(e.length<=d.length){if(k==h.nodeId){return h}else{return -1}}else{var f=0,l=[];for(f=0;f<d.length;f++){l.push(d[f])}var m=l.toString().replace(/,/g,".");if(m==h.nodeId){l.push(e[f]);m=l.toString().replace(/,/g,".");var g=0;for(g=0;g<h.children.length;g++){if(h.children[g].nodeId==m){return c.FIND_NODE(k,h.children[g])}}return -1}else{return -1}}};c.FIND_NODE_BY_NAME=function(d,g){if(d==g.additional){return g}else{var e=0;for(e=0;e<g.children.length;e++){if(d==g.children[e].additional){return g.children[e]}if(g.children[e].children.length>0){var f=c.FIND_NODE_BY_NAME(d,g.children[e]);if(f!=-1){return f}}}}return -1};c.ADD=function(m,j,n,g,d,f,e,p){var i=m+"."+j;var k=c.node_struct();k.nodeId=i;var l=c.FIND_NODE(m,c.root);if(l==-1){return}var h=c.FIND_NODE(i,l);if(h==-1){l.type="1";k.type=n;k.status=0;k.link=g;k.action=d;k.image=f;k.additional=e;k.values=p;k.parent=l;p=p.toString();if(p.indexOf("@")!=-1){k.values_stack=p.split("@")}l.children.push(k);return k}};c.getMaxId=function(h){var g=-1,f=0,j=0;for(f=0;f<h.children.length;f++){j=0;try{j=h.children[f].nodeId.split(".").pop();g=g>j?g:j}catch(d){ModalCommon.open(top.T.Main.Notice,d.message,"error")}}return g};c.ADD_BanUnique=function(q,m,r,j,d,g,e,s){var h=c.FIND_NODE_BY_NAME(e,c.root);if(h!=-1){return}var l=q+"."+m;var n=c.node_struct();n.nodeId=l;var p=c.FIND_NODE(q,c.root);if(p==-1||p.type==0){return}var f=0;for(f=0;f<p.children.length;f++){if(p.children[f].additional==e){return}}var k=c.FIND_NODE(l,p);if(k==-1){p.type="1";n.type=r;n.status=0;n.link=j;n.action=d;n.image=g;n.additional=e;n.values=s;n.parent=p;s=s.toString();if(s.indexOf("@")!=-1){n.values_stack=s.split("@")}p.children.push(n);return n}};c.getAdditionalName=function(d){return"o.additional"+d};c.DEL=function(f){var d=f.split(".");var h=f.substring(0,f.lastIndexOf("."));var g=c.FIND_NODE(h,c.root),e=0;for(e=0;e<g.children.length;e++){if(g.children[e].nodeId==c.selected){c.selected=""}if(g.children[e].nodeId==f){g.children.splice(e,1)}if(g.children.length==0){g.type="0"}}};c.EMPTY_NODE=function(e){var d=c.FIND_NODE(e,c.root);if(d!=-1){d.children=[]}};c.MOUNT=function(d){c.FIND_NODE(parentId,c.root)};c.PRINT=function(e){var d=c.FIND_NODE(e,c.root);if(d!=-1){var f="nodeId:"+d.nodeId+"\n";f+="type:"+d.type+"\n";f+="status:"+d.status+"\n";f+="link:"+d.link+"\n";f+="action:"+d.action+"\n";f+="children:"+d.children.length+"\n";f+="image:"+d.image+"\n";f+="additional:"+d.additional+"\n";ModalCommon.open(top.T.Main.Notice,f,"ok")}else{ModalCommon.open(top.T.Main.Notice,"Node"+e+"not Exist","ok")}};c.ON_OFF=function(f){var e=c.FIND_NODE(f,c.root);if(typeof e.action=="function"){e.action(e)}if(e.type==1){e.status=e.status?0:1;c.CREATE_TREE();$(c.position).empty();document.getElementById(c.position.substring(1,c.position.length)).innerHTML=c.tree_html}else{var d="#"+c.myname+"_"+c.selected.replace(/\./g,"_")+" > table td[name='node']";if(c.selected!=""){var h=$(d);$(h[0]).children("a").removeClass();$(h[0]).children("a").addClass("treeIconNode treeIcon");$(h[1]).children("a").removeClass();$(h[1]).children("a").addClass("treeLeaf")}c.selected=e.nodeId;d="#"+c.myname+"_"+e.nodeId.replace(/\./g,"_")+" > table td[name='node']";var h=$(d);$(h[0]).children("a").removeClass();$(h[0]).children("a").addClass("treeIconFocus treeIcon");$(h[1]).children("a").removeClass();$(h[1]).children("a").addClass("selectedTreeLeaf")}if(e!=-1){c.enhance_on_off(e)}c.enhance_show();if(USER.hasModule(Branch.Modules.XML_TREE)){var i=e;var g=i.additional;while(i.parent!=""){i=i.parent;if(i.additional!=""){g=i.additional+" >> "+g}}Path.setNavPath(g,0)}};c.OVER=function(f){if(c.selected!=f){var e=c.FIND_NODE(f,c.root);if(e.type==1){return}var d="#"+c.myname+"_"+f.replace(/\./g,"_")+" > table td[name='node']";var g=$(d);$(g[0]).children("a").removeClass();$(g[0]).children("a").addClass("treeIconHover treeIcon")}};c.OUT=function(f){if(c.selected!=f){var e=c.FIND_NODE(f,c.root);if(e.type==1){return}var d="#"+c.myname+"_"+f.replace(/\./g,"_")+" > table td[name='node']";var g=$(d);$(g[0]).children("a").removeClass();$(g[0]).children("a").addClass("treeIconNode treeIcon")}c.enhance_show()};c.CONTEXTMENU=function(d,f){var e=c.FIND_NODE(f,c.root);if(e.ContextMenu!=null){if(typeof e.ContextMenu=="function"){e.ContextMenu(d,e)}else{throw new Error("ContextMenu is not a function!")}}else{return}};c.CREATE_NODE=function(h){var k="<div class='clip' style='display:block;'>",d=[];d.push(k);var f=0,e,g=0;for(f=0;f<h.children.length;f++){if(h.children[f].children.length>0||h.children[f].type==1){if(h.children[f].status==0){e=c.myname+"_"+h.children[f].nodeId.replace(/\./g,"_");d.push("<div id='"+e+"'>");d.push("<table cellspacing='0' cellpadding='0' ><tr>");g=0;for(g=0;g<h.children[f].nodeId.split(".").length-2;g++){d.push("<td class='treeIconEmpty'>");d.push("&nbsp;</td>")}d.push("<td name='node' class='treeTd' onmouseout='");d.push(c.myname);d.push('.OUT("');d.push(h.children[f].nodeId);d.push("\")' onmouseover='");d.push(c.myname);d.push('.OVER("');d.push(h.children[f].nodeId);d.push("\")'>");d.push("<a href='#'class='treeIconFolder treeIcon'onclick='");d.push(c.myname);d.push('.ON_OFF("');d.push(h.children[f].nodeId);d.push("\")'>&nbsp;</a>");d.push("</td>");d.push("<td name='node' class='treeTd' id='"+e+"_click"+"' nowrap='nowrap'>");d.push("<a href='#' class='treeLeaf' onfocus='this.blur();' onclick='");d.push(c.myname);d.push('.ON_OFF("');d.push(h.children[f].nodeId);d.push("\")'>");d.push((h.children[f].additional?h.children[f].additional:("node "+h.children[f].nodeId)));d.push("</a></td>");d.push("</tr></table>");d.push("</div>")}else{e=c.myname+"_"+h.children[f].nodeId.replace(/\./g,"_");d.push("<div id='"+e+"'");d.push(">");d.push("<table  cellspacing='0' cellpadding='0' ><tr>");g=0;for(g=0;g<h.children[f].nodeId.split(".").length-2;g++){d.push("<td class='treeIconEmpty'>");d.push("&nbsp;</td>")}d.push("<td name='node' class='treeTd' onmouseout='");d.push(c.myname);d.push('.OUT("');d.push(h.children[f].nodeId);d.push("\")' onmouseover='");d.push(c.myname);d.push('.OVER("');d.push(h.children[f].nodeId);d.push("\")'>");d.push("<a href='#'class='treeIconFolderOpen treeIcon'onclick='");d.push(c.myname);d.push('.ON_OFF("');d.push(h.children[f].nodeId);d.push("\")'>&nbsp;</a>");d.push("</td>");d.push("<td name='node' class='treeTd' id='"+e+"_click"+"' nowrap='nowrap'>");d.push("<a href='#' class='treeLeaf' onfocus='this.blur();' onclick='");d.push(c.myname);d.push('.ON_OFF("');d.push(h.children[f].nodeId);d.push("\")'>");d.push((h.children[f].additional?h.children[f].additional:("node "+h.children[f].nodeId)));d.push("</a></td>");d.push("</tr></table>");d.push("</div>");d.push(c.CREATE_NODE(h.children[f]))}}else{e=c.myname+"_"+h.children[f].nodeId.replace(/\./g,"_");d.push("<div id='"+e+"'");d.push(">");d.push("<table  cellspacing='0' cellpadding='0' ><tr>");g=0;for(g=0;g<h.children[f].nodeId.split(".").length-2;g++){d.push("<td class='treeIconEmpty'>");d.push("&nbsp;</td>")}if(h.children[f].nodeId==c.selected){d.push("<td name='node' class='treeTd' onmouseout='");d.push(c.myname);d.push('.OUT("');d.push(h.children[f].nodeId);d.push("\")' onmouseover='");d.push(c.myname);d.push('.OVER("');d.push(h.children[f].nodeId);d.push("\")'>");d.push("<a href='#'class='treeIconFocus treeIcon'onclick='");d.push(c.myname);d.push('.ON_OFF("');d.push(h.children[f].nodeId);d.push("\")'>&nbsp;</a>");d.push("</td>");d.push("<td name='node' class='treeTd' id='"+e+"_click"+"' nowrap='nowrap'>");d.push("<a href='#' class='treeLeaf' onfocus='this.blur();' onclick='");d.push(c.myname);d.push('.ON_OFF("');d.push(h.children[f].nodeId);d.push("\")'>");d.push((h.children[f].additional?h.children[f].additional:("node "+h.children[f].nodeId)));d.push("</a></td>")}else{d.push("<td name='node' class='treeTd' onmouseout='");d.push(c.myname);d.push('.OUT("');d.push(h.children[f].nodeId);d.push("\")' onmouseover='");d.push(c.myname);d.push('.OVER("');d.push(h.children[f].nodeId);d.push("\")'>");d.push("<a href='#'class='treeIconNode treeIcon'onclick='");d.push(c.myname);d.push('.ON_OFF("');d.push(h.children[f].nodeId);d.push("\")'>&nbsp;</a>");d.push("</td>");d.push("<td name='node' class='treeTd' id='"+e+"_click"+"' nowrap='nowrap'> ");d.push("<a href='#' class='treeLeaf' onfocus='this.blur();' onclick='");d.push(c.myname);d.push('.ON_OFF("');d.push(h.children[f].nodeId);d.push("\")'>");d.push((h.children[f].additional?h.children[f].additional:("node "+h.children[f].nodeId)));d.push("</td>")}d.push("</tr></table>");d.push("</div>")}}d.push("</div>");return d.join("")};c.CREATE_TREE=function(){c.tree_html="<div class='htree' id = '"+c.myname+"'>";if(c.root.children.length>0){c.tree_html=c.tree_html+"<div>";c.tree_html=c.tree_html+c.CREATE_NODE(c.root);c.tree_html=c.tree_html+"</div>"}c.tree_html=c.tree_html+"</div>";return c.tree_html};c.SHOW=function(){c.CREATE_TREE();$(c.position).empty();$(c.position).append(c.tree_html);c.enhance_show()};c.SEARCH_ALL=function(k,p,d){var l=[];var h=c.FIND_NODE(k,c.root);l.push(h);var f=0,g=0;while(l.length>0){var e=l.pop();e.status=0;if(e.values_stack!=null&&e.values_stack.length>0){switch(p){case"1":if(e.values_stack[3].indexOf("*")==-1){if(e.values_stack[3].toLocaleLowerCase()==d.toLocaleLowerCase()){return e}}else{var o=e.values_stack[3].split("*");for(g=0;g<o.length;g++){if(o[g].toLocaleLowerCase()==d.toLocaleLowerCase()){return e}}}break;case"2":if(e.values_stack[0].indexOf("*")==-1){if(e.values_stack[0].toLocaleLowerCase()==d.toLocaleLowerCase()){return e}}else{var n=e.values_stack[0].split("*");for(g=0;g<n.length;g++){if(n[g].toLocaleLowerCase()==d.toLocaleLowerCase()){return e}}}break;case"3":if(e.values_stack[2].indexOf("*")==-1){if(e.values_stack[2].toLocaleLowerCase()==d.toLocaleLowerCase()){return e}}else{var m=e.values_stack[2].split("*");for(g=0;g<m.length;g++){if(m[g].toLocaleLowerCase()==d.toLocaleLowerCase()){return e}}}break;default:break}}for(f=0;f<e.children.length;f++){l.push(e.children[f])}}return null};c.CLOSE_ALL=function(){var f=[];f.push(c.root);var e=0;while(f.length>0){var d=f.pop();d.status=0;for(e=0;e<d.children.length;e++){f.push(d.children[e])}}};c.OPEN_ALL=function(){var f=[];f.push(c.root);var e=0;while(f.length>0){var d=f.pop();d.status=1;for(e=0;e<d.children.length;e++){f.push(d.children[e])}}};(function(){c.root=c.node_struct();c.root.nodeId="1";c.position="#"+b;c.myname=a}());return c}var URLManager=(function(){var c={};function e(f){c.url=f;c.action=""}function b(){return c.url}function d(f){c.action=f}function a(){return c.action}return{setURL:e,getURL:b,setAction:d,getAction:a}}());var Path=(function(){function g(k,p){onlineorNo();var m=k.values.split("@")[0],n=k.values.split("@")[1],o=k,l=o.additional;lmt_struct.structName=n;lmt_struct.structID=m;top.G_MIX_MUL_INTANCES="['"+m+"']";document.getElementById("contentMainFrame").src=p+"?r="+DeviceInfo.getPartialVersion();while(o.parent!==""){o=o.parent;if(o.additional!==""){l=o.additional+" >> "+l}}URLManager.setURL(p)}function h(k){g(k,"general/pages/dynamicLoad.asp")}function i(k){g(k,"general/pages/multiton.asp")}function b(k){g(k,"general/pages/log.asp")}var e=[],d={path:[],position:""};function c(){d.position="#"+"navInfo"}function j(){var m="",k=0,l=0;for(k=0,l=d.path.length;k<l;k+=1){if(k===0){m=d.path[0]}else{m+=" >> "+d.path[k]}}$(d.position).text(m)}function a(k){if(k>d.path.length){return}d.path=d.path.splice(0,k+1)}function f(k,l){a(l);d.path[l]=k;j()}c();return{showLeaf:h,showMulLeaf:i,gotoLog:b,setNavPath:f}}());var G_MIX_PARAM={mixStructID:"",mixMembers:"",mixTitles:""},G_MIX_MUL_INTANCES;(function(){var d=null,b=null,c="",i=-1,g=false;ManTree=function(j){i=top.c_paramRowIndex.StructName;g=(Language==="EN");c=j};ManTree.prototype.initTree=function(j){b=j;d=e();h()};function h(){var o=$(d).find("earth > root"),n=[],k=0,l=0,m=0,j=0;for(k=0,l=o.length;k<l;k+=1){m=window.parseInt($(o[k]).attr("level"),10);if(USER.isAuthorised(m)){n=o[k];break}}if($(n).size()===0){return}j=baseInfoTreeObj.root.children.length;a(n,baseInfoTreeObj.rootID,j);b.SHOW()}function a(q,t,p){var A=t,z=p,j=[],k=0,l=0,s="",r=null,v="",u="",x="",y="",m="",n="",w="",o="";if(q.tagName==="root"){j=$(q).children();k=0;l=0;for(k=0,l=j.length;k<l;k+=1,z+=1){a(j[k],t,z)}}else{if(q.tagName==="branch"){j=$(q).children();if(g){s=$(q).attr("en_title")}else{s=$(q).attr("title")}r=b.ADD_BanUnique(A,z.toString(),"1","","","",s,"");for(k=0,l=j.length;k<l;k+=1){a(j[k],r.nodeId,k)}}else{if(q.tagName==="leaf"){s=$(q).text();v=$(q).attr("structID");o=$(q).attr("mixStructID")||"";u=-1;x="unknow";y=$(q).attr("url");m=$(q).attr("member");n=$(q).attr("title");w=$(q).attr("structs");if(typeof(v)!=="undefined"&&v!==null){u=localDB.T_search("c_param","StructID",v);if(u.length===0){return}x=u[0][i]}if(x==="unknow"){x=s}if(g){s=$(q).attr("en_title")}b.ADD_BanUnique(A,z.toString(),"","",f,"",s,v+"@"+x+"@"+y+"@"+m+"@"+n+"@"+w+"@"+o)}}}}function f(k){G_MIX_MUL_INTANCES="";var l=k.values.split("@"),m=l[2],j=document.getElementById("contentMainFrame");lmt_struct.structID=l[0];lmt_struct.structName=l[1];G_MIX_PARAM.mixMembers=l[3];G_MIX_PARAM.mixTitles=l[4];G_MIX_MUL_INTANCES=l[5];G_MIX_PARAM.mixStructID=l[6]!==""?l[6]:null;j.src=m+"?r="+DeviceInfo.getPartialVersion();URLManager.setURL(m)}function e(){var j=null;$.ajax({type:"get",url:c,async:false,dataType:"xml",success:function(k,l){j=k},error:function(){throw new Error("get xml error")}});return j}}());